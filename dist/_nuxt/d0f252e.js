(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{1266:function(e,t,r){var content=r(1429);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(39).default)("678605fe",content,!0,{sourceMap:!1})},1428:function(e,t,r){"use strict";r(1266)},1429:function(e,t,r){var n=r(38)((function(i){return i[1]}));n.push([e.i,".registrationMarks__create .btn.red{background-color:#f81734;border:1px solid #f81734}@media (max-width:1250px){.registrationMarks__create .btns{flex:0 0 50%!important;max-width:50%!important;width:50%!important}}",""]),n.locals={},e.exports=n},1570:function(e,t,r){"use strict";r.r(t);r(8),r(7),r(3),r(2),r(10),r(4),r(11);var n=r(1),o=r(0),c=(r(32),r(17),r(24),r(22),r(15),r(16)),l=r(174);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={name:"moderatorPlate",head:function(){return this.$headMeta({title:"".concat(this.$t("moderation"))})},data:function(){return{plates:[],type:"plates",pending:!1,announce_id:"",region_id:"",region_name:"",city_name:"",region_letter1:"",region_letter2:"",region_number:"",form:{car_number:"",price:"",currency_id:"",region_id:"",comment:""},numbers:[{name:"A"},{name:"B"},{name:"C"},{name:"D"},{name:"E"},{name:"F"},{name:"G"},{name:"H"},{name:"I"},{name:"J"},{name:"K"},{name:"L"},{name:"M"},{name:"N"},{name:"O"},{name:"P"},{name:"Q"},{name:"R"},{name:"S"},{name:"T"},{name:"U"},{name:"V"},{name:"W"},{name:"X"},{name:"Y"},{name:"Z"}],currency:{name:{1:"AZN",2:"USD"}},currencyList:[{id:1,name:"AZN"},{id:2,name:"USD"}]}},computed:d(d({},Object(c.c)({registrationMark:"announcement",cities:"sellOptions",getRegionNumbers:"getRegionNumbers",single_announce:"moderator/single_announce"})),{},{crumbs:function(){return[{name:this.$t("moderator")}]}}),methods:{getAnnounceData:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$auth.setUserToken("Bearer ".concat(e.$route.query.token));case 2:return t.next=4,e.$axios.$get("/user");case 4:return r=t.sent,e.$auth.setUser(r.user),t.prev=6,t.next=9,e.$axios.$get("/ticket/plate").then((function(t){e.announce_id=t.data.id,e.form.currency_id=t.data.currency,e.form.region_id=t.data.region.id,e.city_name=t.data.region.name[e.locale],e.region_name=t.data.serial_region,e.region_id=t.data.car_number.split("-")[0],e.region_letter1=t.data.car_number.split("-")[1][0],e.region_letter2=t.data.car_number.split("-")[1][1],e.region_number=t.data.car_number.split("-")[2],e.form.price=t.data.price.split(" ").slice(0,-1).join(""),e.form.comment=t.data.comment,console.log("res",t)}));case 9:t.sent,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(6),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[6,12]])})))()},handleSubmit:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.$v.$touch(),!t.$v.$error){r.next=3;break}return r.abrupt("return");case 3:return t.pending=!0,t.form.status=e,t.form.car_number="".concat(t.region_id.split("-")[0]," - ").concat(t.region_letter1).concat(t.region_letter2?t.region_letter2:""," - ").concat(t.region_number),r.prev=6,r.next=9,t.$axios.$post("/ticket/plate/"+t.announce_id,t.form).then((function(){t.pending=!1,t.$toasted.success(t.$t("success_payment")),2==t.user.admin_group?location.href="/alvcp/resources/announce-moderators":location.href="/alvcp/resources/plates"})).catch((function(){t.$toasted.error(t.$t("error"))}));case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(6),console.log(r.t0);case 14:case"end":return r.stop()}}),r,null,[[6,11]])})))()},back:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(2!=e.user.admin_group){t.next=6;break}return t.next=3,e.$axios.$post("/ticket/detach/"+e.announce_id+"/car");case 3:location.href="/alvcp/resources/announce-moderators",t.next=9;break;case 6:return t.next=8,e.$axios.$post("/ticket/detach/"+e.announce_id+"/car");case 8:location.href="/alvcp/resources/plates";case 9:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getAnnounceData()},fetch:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.store,t.next=3,r.dispatch("getOptions");case 3:return t.next=5,r.dispatch("fetchRegionNumbers");case 5:case"end":return t.stop()}}),t)})))()},validations:{region_id:{required:l.required},region_letter1:{required:l.required},region_number:{required:l.required,minLength:Object(l.minLength)(3)},form:{price:{minLength:Object(l.minLength)(2)},currency_id:{required:l.required},region_id:{required:l.required}}}},_=(r(1428),r(12)),component=Object(_.a)(f,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"registrationMarks moderator"},[t("div",{staticClass:"container p-0"},[t("breadcrumbs",{attrs:{crumbs:e.crumbs}}),e._v(" "),t("div",{staticClass:"registrationMarks__create"},[t("h4",{staticClass:"registrationMarks__create-title"},[t("span",[e._v(e._s(e.$t("place_an_ad")))]),e._v(" "),t("span")]),e._v(" "),t("div",{staticClass:"registrationMarks__create-inner"},[t("form",{ref:"form",staticClass:"registrationMarks__create-form"},[t("div",{staticClass:"col-12 col-xl-6"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-6 col-xl-5"},[t("form-select",{attrs:{label:e.region_name,options:e.getRegionNumbers,invalid:e.$v.region_id.$error,clearPlaceholder:!0,disabled:!0},model:{value:e.region_id,callback:function(t){e.region_id=t},expression:"region_id"}})],1),e._v(" "),t("div",{staticClass:"col-2 col-xl-2"},[t("form-select",{attrs:{label:"A",options:e.numbers,invalid:e.$v.region_letter1.$error,clearPlaceholder:!0,disabled:!0},model:{value:e.region_letter1,callback:function(t){e.region_letter1=t},expression:"region_letter1"}})],1),e._v(" "),t("div",{staticClass:"col-2 col-xl-2"},[t("form-select",{attrs:{label:"A",options:e.numbers,clearPlaceholder:!0,disabled:!0},model:{value:e.region_letter2,callback:function(t){e.region_letter2=t},expression:"region_letter2"}})],1),e._v(" "),t("div",{staticClass:"col-2 col-xl-2"},[t("form-numeric-input",{attrs:{"max-value":999,invalid:e.$v.region_number.$error,disabled:!0},model:{value:e.region_number,callback:function(t){e.region_number=t},expression:"region_number"}})],1)]),e._v(" "),t("div",{staticClass:"row mt-5"},[t("div",{staticClass:"col-6 col-xl-5"},[t("form-numeric-input",{attrs:{placeholder:e.$t("price"),invalid:e.$v.form.price.$error},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),t("div",{staticClass:"col-3 col-xl-2"},[t("form-select",{attrs:{label:"AZN",options:e.currencyList,clearPlaceholder:!0,invalid:e.$v.form.currency_id.$error},model:{value:e.form.currency_id,callback:function(t){e.$set(e.form,"currency_id",t)},expression:"form.currency_id"}})],1),e._v(" "),t("div",{staticClass:"col-3 col-xl-4"},[t("form-select",{attrs:{label:e.city_name,clearPlaceholder:!0,options:e.cities.regions,invalid:e.$v.form.region_id.$error},model:{value:e.form.region_id,callback:function(t){e.$set(e.form,"region_id",t)},expression:"form.region_id"}})],1)]),e._v(" "),t("div",{staticClass:"row mt-5"},[t("div",{staticClass:"col-12 col-xl-11"},[t("form-textarea",{attrs:{placeholder:e.$t("description2"),maxlength:3e3},model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}})],1)]),e._v(" "),t("div",{staticClass:"row mt-5"},[t("div",{staticClass:"col-1 col-xl-1 mb-1 btns",staticStyle:{width:"30.5%",flex:"0 0 30.5%","max-width":"30.5%"}},[t("button",{class:["btn",{pending:e.pending}],on:{click:function(t){return e.handleSubmit(1)}}},[e._v("\n                           "+e._s(e.$t("confirm"))+"\n                        ")])]),e._v(" "),t("div",{staticClass:"col-1 col-xl-1 mb-1 btns",staticStyle:{width:"30.5%",flex:"0 0 30.5%","max-width":"30.5%"}},[t("button",{class:["btn red",{pending:e.pending}],on:{click:function(t){return e.handleSubmit(0)}}},[e._v("\n                           "+e._s(e.$t("reject"))+"\n                        ")])]),e._v(" "),t("div",{staticClass:"col-1 col-xl-1 btns",staticStyle:{width:"30.5%",flex:"0 0 30.5%","max-width":"30.5%"}},[t("button",{class:["btn",{pending:e.pending}],on:{click:function(t){return e.handleSubmit(3)}}},[e._v("\n                           "+e._s(e.$t("sold"))+"\n                        ")])]),e._v(" "),t("div",{staticClass:"col-1 col-xl-1 btns",staticStyle:{width:"30.5%",flex:"0 0 30.5%","max-width":"30.5%"}},[t("button",{class:["btn",{pending:e.pending}],on:{click:function(t){return t.preventDefault(),e.back.apply(null,arguments)}}},[e._v("\n                           "+e._s(e.$t("back_to_list"))+"\n                        ")])])])])])])])],1)])}),[],!1,null,null,null);t.default=component.exports}}]);