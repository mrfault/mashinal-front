(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1197:function(t,e,n){"use strict";n(15),n(8),n(7),n(10),n(4),n(11);var r=n(1),c=n(0),o=(n(32),n(20),n(3),n(2),n(24),n(35),n(16));function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={mixins:[n(990).a],data:function(){return{pending:!1,showDeleteModal:!1,swiperOps:{effect:"coverflow",grabCursor:!0,init:!1,centeredSlides:!0,slidesPerView:"auto",roundLengths:!0,keyboard:{enabled:!0},coverflowEffect:{rotate:40,stretch:110,depth:300,modifier:1,slideShadows:!1},breakpoints:{340:{coverflowEffect:{stretch:130}},390:{coverflowEffect:{stretch:160}}}}}},computed:l(l({},Object(o.c)({bankingCards:"bankingCards/bankingCards",cars:"garage/cars"})),{},{activeCars:function(){var t=this;return this.cars.data?this.cars.data.filter((function(t){return 1===t.status})).map((function(e){return{id:e.id,car_number:t.$readCarNumber(e.car_number),created_date:t.$moment(e.created_date).format("DD.MM.YYYY")}})):[]},showCardsSwiper:function(){return!!this.bankingCards.length}}),methods:l(l({},Object(o.b)({getBankingCards:"bankingCards/getBankingCards",makeCardDefault:"bankingCards/makeCardDefault",add:"bankingCards/addCard",delete:"bankingCards/deleteCard"})),{},{cardNumber:function(t){return this.$parseCardNum(t).map((function(t){return"<span>".concat(t,"</span>")})).join("")},addCard:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.pending){e.next=2;break}return e.abrupt("return");case 2:return t.pending=!0,e.prev=3,e.next=6,t.add({is_mobile:t.isMobileBreakpoint});case 6:n=e.sent,t.pending=!1,t.handlePayment(n,!1,t.$t("card_added"),"v2"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),t.pending=!1;case 14:case"end":return e.stop()}}),e,null,[[3,11]])})))()},deleteCard:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.pending){n.next=2;break}return n.abrupt("return");case 2:return e.pending=!0,n.prev=3,n.next=6,e.delete(t);case 6:e.$toasted.success(e.$t("card_deleted")),e.pending=!1,e.showDeleteModal=!1,n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),e.pending=!1;case 14:case"end":return n.stop()}}),n,null,[[3,11]])})))()},setDefault:function(t){t.default||this.makeCardDefault(t.id)},initSwiper:function(){var t=this;this.$nextTick((function(){setTimeout((function(){var e;null===(e=t.cardsSwiper)||void 0===e||e.init()}),100)}))}}),watch:{showCardsSwiper:function(t){t&&this.initSwiper()}},mounted:function(){this.initSwiper()}},v=(n(1343),n(12)),component=Object(v.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"banking-cards"},[e("div",{staticClass:"pt-2 pb-2"},[e("div",{directives:[{name:"swiper",rawName:"v-swiper:cardsSwiper",value:t.swiperOps,expression:"swiperOps",arg:"cardsSwiper"},{name:"show",rawName:"v-show",value:t.showCardsSwiper,expression:"showCardsSwiper"}],ref:"cardsSwiper",staticClass:"swiper-container"},[e("div",{staticClass:"swiper-wrapper"},t._l(t.bankingCards,(function(n){return e("div",{key:n.id,staticClass:"swiper-slide"},[e("div",{staticClass:"banking-cards_item"},[e("div",{staticClass:"card-img"},[e("img",{attrs:{src:"/img/cards/card-".concat(n.brand.toLowerCase(),"-").concat(n.img,".png"),alt:n.brand}})]),t._v(" "),e("div",{staticClass:"card-details d-flex flex-column justify-content-between"},[e("div",{staticClass:"card-top d-flex"},[e("transition",{attrs:{name:"fade2"}},[n.default?e("span",{staticClass:"badge"},[e("span",[t._v(t._s(t.$t("main")))])]):t._e()]),t._v(" "),e("div",{staticClass:"d-flex ml-auto"},[e("span",{class:["cursor-pointer",{active:n.default}],on:{click:function(e){return t.setDefault(n)}}},[e("icon",{attrs:{name:"bookmark-".concat(n.default?"fill":"outline")}})],1),t._v(" "),e("span",{staticClass:"cursor-pointer",on:{click:function(e){t.showDeleteModal=n.id}}},[e("icon",{attrs:{name:"garbage"}}),t._v(" "),e("modal-popup",{attrs:{toggle:t.showDeleteModal===n.id,title:t.$t("are_you_sure_you_wnat_to_delete_the_card")},on:{close:function(e){t.showDeleteModal=!1}}},[e("form",{staticClass:"form",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.deleteCard(n.id)}}},[n.default&&t.activeCars.length?[e("div",{staticClass:"card-bordered"},[e("div",{staticClass:"vehicle-specs"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("ul",t._l(t.activeCars,(function(n){return e("li",{key:n.id},[e("span",[t._v(t._s(n.car_number))]),t._v(" "),e("span",[t._v(t._s(n.created_date))])])})),0)])])])]),t._v(" "),e("p",{domProps:{innerHTML:t._s(t.$t("card_is_used_to_pay",{card:n.masked_pan}))}})]:t._e(),t._v(" "),e("button",{class:["btn btn--green full-width",{pending:t.pending}],attrs:{type:"submit"}},[t._v("\n                          "+t._s(t.$t("confirm"))+"\n                        ")])],2)])],1)])],1),t._v(" "),e("div",{staticClass:"card-number d-flex justify-content-between",domProps:{innerHTML:t._s(t.cardNumber(n.masked_pan))}}),t._v(" "),t._m(0,!0)])])])})),0)]),t._v(" "),t.showCardsSwiper?t._e():e("div",{staticClass:"no-cards position-relative"},[e("div",{staticClass:"banking-cards_item"},[e("div",{staticClass:"card-img"},[e("img",{attrs:{src:"/img/cards/card-".concat(t.colorMode,"-0.png"),alt:""}})]),t._v(" "),e("div",{staticClass:"card-details d-flex flex-column align-items-center justify-content-center"},[e("span",{staticClass:"text-center"},[t._v(t._s(t.$t("no_active_cards")))])])]),t._v(" "),t._m(1),t._v(" "),t._m(2)])]),t._v(" "),e("div",{staticClass:"text-center"},[e("button",{class:["btn p-2 mt-1",{pending:t.pending&&!t.showDeleteModal}],on:{click:t.addCard}},[e("icon",{staticClass:"btn-plus mr-1",attrs:{name:"plus-circle"}}),t._v("\n      "+t._s(t.$t("add_new_card"))+"\n    ")],1)])])}),[function(){var t=this._self._c;return t("div",{staticClass:"card-bottom d-flex"},[t("span",[this._v("**/**")])])},function(){var t=this._self._c;return t("div",{staticClass:"banking-cards_item"},[t("div")])},function(){var t=this._self._c;return t("div",{staticClass:"banking-cards_item"},[t("div")])}],!1,null,null,null);e.a=component.exports},1226:function(t,e,n){var content=n(1344);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("2fb14099",content,!0,{sourceMap:!1})},1343:function(t,e,n){"use strict";n(1226)},1344:function(t,e,n){var r=n(38)((function(i){return i[1]}));r.push([t.i,".btn-plus{margin-right:10px}",""]),r.locals={},t.exports=r},990:function(t,e,n){"use strict";n.d(e,"a",(function(){return k}));n(8),n(7),n(3),n(10),n(4),n(11);var r=n(1),c=n(0),o=(n(32),n(63),n(2),n(35),n(16)),d=n(274),l=n(996),f={props:{popupName:{type:String,default:"payment-popup"}},methods:{show:function(){this.$nuxt.$emit("show-terminal-info",this.popupName)}}},v=n(12),m=Object(v.a)(f,(function(){var t=this,e=t._self._c;return e("p",{staticClass:"info-text text-left"},[e("inline-svg",{attrs:{src:"/icons/alert-circle.svg"}}),t._v(" "),e("span",{staticClass:"text-medium cursor-pointer text-red",on:{click:t.show}},[t._v(t._s(t.$t("pay_with_terminal")))])],1)}),[],!1,null,null,null).exports;n(17);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var _={props:{name:{type:String,default:"payment-popup"}},data:function(){return{showTerminalInfo:!1}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.c)(["announcement"])),methods:{open:function(t){t===this.name&&(this.showTerminalInfo=!0,this.$emit("open"))},close:function(){this.showTerminalInfo=!1,this.$emit("close")}},mounted:function(){this.$nuxt.$on("show-terminal-info",this.open)},beforeDestroy:function(){this.$nuxt.$off("show-terminal-info",this.open)}},w=_,C=Object(v.a)(w,(function(){var t=this,e=t._self._c;return e("modal-popup",{attrs:{toggle:t.showTerminalInfo,title:t.$t("pay_with_terminal"),"modal-class":"terminal-info-popup"},on:{close:t.close}},[e("div",{staticClass:"phone-section"},[t.announcement.user?e("div",{staticClass:"phone"},[t._v("\n      "+t._s(t.$parsePhone(t.announcement.user.phone))+"\n    ")]):t._e(),t._v(" "),e("span",[t._v("\n      "+t._s(t.$t("mobile_number"))+"\n    ")])]),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"description"},[e("img",{attrs:{src:"/images/milli-on.svg",alt:""}}),t._v(" "),e("span",[t._v(t._s(t.$t("terminal_popup_title")))])]),t._v(" "),e("div",{staticClass:"steps"},t._l(t.$t("terminal_pay_steps"),(function(n,i){return e("div",{key:i,staticClass:"step-item"},[e("div",{staticClass:"step-number"},[e("span",[t._v(t._s(i))])]),t._v(" "),e("div",{staticClass:"step-text"},[t._v(t._s(n))])])})),0),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-7"},[e("p",[t._v("\n       "+t._s(t.$t("terminal_help_description"))+"\n      ")])]),t._v(" "),e("div",{staticClass:"col-md-5"},[e("button",{staticClass:"btn btn--primary-outline full-width",attrs:{type:"button"},on:{click:t.close}},[t._v("\n        "+t._s(t.$t("go_back"))+"\n      ")])])])])}),[],!1,null,null,null).exports;function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function O(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var k={mixins:[d.a],components:{SelectBankingCard:l.a,TerminalInfoButton:m,TerminalInfoPopup:C},data:function(){return{showPaymentModal:!1,paymentMethod:"card",bankingCard:""}},mounted:function(){this.selectDefaultCard()},computed:O(O(O({},Object(o.c)({bankingCards:"bankingCards/bankingCards"})),Object(o.c)(["paidStatusData"])),{},{paymentMethodOptions:function(){return[{key:"card",name:this.$t("pay_with_card")},{key:"balance",name:this.$t("pay_with_balance"),disabled:!this.haveBalanceToPay}]}}),methods:O(O({},Object(o.b)(["updatePaidStatus"])),{},{selectDefaultCard:function(){var t=this.bankingCards.find((function(t){return t.default}));t&&(this.bankingCard=t.id)},callUpdatePaidStatus:function(t,text){var e=t?"success":"error";t||(text=this.$t("try_again")),this.updatePaidStatus({type:e,text:text,title:this.$t("".concat(e,"_payment"))})},handlePayment:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],text=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"v1";if(this.isMobileBreakpoint){var o;this.$nuxt.$loading.start(),setTimeout((function(){return e.$nuxt.$loading.finish()}),500),window.location=(null==t||null===(o=t.data)||void 0===o?void 0:o.redirect_url)||t}else{var d,l,f={v1:"width=494,height=718",v2:"width=1042,height=725"}[c];window.open((null==t||null===(d=t.data)||void 0===d?void 0:d.redirect_url)||t,"purchaseservice","toolbar=yes,scrollbars=yes,resizable=yes,top=50,left=100,"+f);var v=null==t||null===(l=t.data)||void 0===l?void 0:l.payment_id;v&&this.connectEcho("purchase.".concat(v),!1).listen("PurchaseInitiated",function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(data){var r,c,o,d,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.showPaymentModal=!1,r=data.payment,c=r.is_paid,o=r.status,d=c||1===o,n=n instanceof Array?n[d?0:1]:n,!d){t.next=17;break}if("attorney_pay"!==data.payment.operation_key){t.next=7;break}return t.abrupt("return",e.$router.push({path:e.$localePath("/garage"),query:{tab:"attorney-list"}}));case 7:if(!e.loggedIn){t.next=10;break}return t.next=10,e.$auth.fetchUser();case 10:if(n){t.next=14;break}return t.next=13,e.$nuxt.refresh();case 13:e.callUpdatePaidStatus(d,text);case 14:localStorage.removeItem("selectedPackage"),t.next=18;break;case 17:e.callUpdatePaidStatus(d);case 18:l=function(){e.connectEcho("purchase.".concat(v),!1).stopListening("PurchaseInitiated")},n?d?e.$router.push(n,(function(){e.callUpdatePaidStatus(d,text),l()})):(e.$store.dispatch("fetchResetForm",!1),e.callUpdatePaidStatus(d,text),l()):l(),"offer_payment_key"==data.payment.operation_key&&d&&setTimeout((function(){e.$router.push("/offer")}),2e3);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}}),watch:{bankingCards:function(t){this.selectDefaultCard()},haveBalanceToPay:function(t){t||(this.paymentMethod="card")}}}},996:function(t,e,n){"use strict";n(15),n(8),n(7),n(3),n(10),n(4),n(11);var r=n(1),c=n(0),o=(n(32),n(20),n(24),n(63),n(2),n(16));function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={props:{value:{},showCardImage:{type:Boolean,default:!0}},computed:l(l({},Object(o.c)({bankingCards:"bankingCards/bankingCards"})),{},{activeCardId:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},cardOptions:function(){var t=this;return this.bankingCards.map((function(e){return{key:e.id,name:t.$parseCardNum(e.masked_pan).join(" "),icon:"/img/cards/".concat(e.brand.toLowerCase()).concat(t.isDarkMode?"-white":"",".svg"),brand:e.brand}}))},activeCard:function(){var t=this;return this.bankingCards.find((function(e){return e.id===t.activeCardId}))}}),methods:l(l({},Object(o.b)({getBankingCards:"bankingCards/getBankingCards"})),{},{cardNumber:function(t){return this.$parseCardNum(t).map((function(t){return"<span>".concat(t,"</span>")})).join("")}}),fetch:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getBankingCards();case 2:case"end":return e.stop()}}),e)})))()}},v=n(12),component=Object(v.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"select-banking-card"},[e("form-select",{attrs:{label:t.$t("pay_with_card"),options:t.cardOptions,"clear-option-text":t.$t("other_card"),"clear-option-pull-down":!0,"has-cards":!0,"skip-select":!0,"img-key":"icon"},model:{value:t.activeCardId,callback:function(e){t.activeCardId=e},expression:"activeCardId"}}),t._v(" "),t.activeCard&&t.showCardImage?e("div",{staticClass:"banking-cards_item mt-3"},[e("div",{staticClass:"card-img"},[e("img",{attrs:{src:"/img/cards/card-".concat(t.activeCard.brand.toLowerCase(),"-").concat(t.activeCard.img,".png"),alt:t.activeCard.brand}})]),t._v(" "),e("div",{staticClass:"card-details d-flex flex-column justify-content-between"},[e("div",{staticClass:"card-top d-flex"}),t._v(" "),e("div",{staticClass:"card-number d-flex justify-content-between",domProps:{innerHTML:t._s(t.cardNumber(t.activeCard.masked_pan))}}),t._v(" "),t._m(0)])]):t._e()],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"card-bottom d-flex"},[t("span",[this._v("**/**")])])}],!1,null,null,null);e.a=component.exports}}]);