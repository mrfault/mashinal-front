(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{1141:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));n(8),n(7),n(3),n(2),n(10),n(4),n(11);var r=n(0),o=(n(587),n(16));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={computed:l(l({},Object(o.e)(["myAnnouncementStats"])),{},{countStats:function(){var t=this.myAnnouncementStats;return[{label:"announcements",value:t.announce_count,from:!1,color:this.isDarkMode?"#FFFFFF":"#081A3E"},{label:"views_count",value:t.announce_view_count,from:!1,color:"#29A53E"},{label:"favorites",value:t.total_favorites,from:!1,color:"#F81734"},{label:"messages",value:t.message_count,from:!1,color:"#246EB2"}]},announcementStats:function(){var t=this.myAnnouncementStats;return{possible:t.possible_announce_count,used:t.used_announce_count,left:t.possible_announce_count<t.used_announce_count?0:t.possible_announce_count-t.used_announce_count,calls:t.call_count,contract:{price:t.package_price,left_days:t.agreement_left_days,end_date:t.agreement_end_date}}},mostViewed:function(){var t=this.myAnnouncementStats;return Object.values(t.most_viewed_announces)}})}},1144:function(t,e,n){"use strict";n(7),n(53),n(14);var r={components:{LetterOfAttorneyButton:n(1081).a},props:{shouldExtendContract:Boolean,item:Object},computed:{isSafari:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},methods:{setStoreBalance:function(link){this.$store.commit("mutate",{property:"balanceHasAnimation",value:!0}),this.$router.push(link)},checkIfSafari:function(link){this.isSafari?this.setStoreBalance(link):alert("hayhuy")}}},o=n(12),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("nuxt-link",{staticClass:"e-service e-service__card",attrs:{to:t.$localePath(t.item.url)}},[e("div",{staticClass:"e-service__header"},[e("inline-svg",{attrs:{src:"/card-icons/new/".concat(t.item.image,".svg")}})],1),t._v(" "),e("div",{staticClass:"e-service__body"},[e("div",{staticClass:"e-service__card--image"},[e("img",{attrs:{src:"/new-icons/profile/".concat(t.item.image),alt:""}})]),t._v(" "),e("h5",{staticClass:"e-service__title"},[t._v(t._s(t.$t(t.item.title)))]),t._v(" "),e("p",{staticClass:"e-service__description"},[t._v(t._s(t.$t(t.item.description)))])])])}),[],!1,null,null,null);e.a=component.exports},1203:function(t,e,n){"use strict";var r={props:{title:String,icon:String,path:String}},o=n(12),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"card with-margins dashboard-card"},[t.title?e("h3",[t._v(t._s(t.title))]):t._e(),t._v(" "),t.icon?e("icon",{staticClass:"dashboard-card_icon",attrs:{name:t.icon}}):t._e(),t._v(" "),e("div",{staticClass:"dashboard-card_content full-height"},[t._t("default")],2),t._v(" "),t.path?e("div",{staticClass:"dashboard-card_footer"},[t._t("footer"),t._v(" "),e("nuxt-link",{attrs:{to:t.path},nativeOn:{click:function(e){return t.setPageRef(t.$route.path)}}},[t._v("\n      "+t._s(t.$t("more_details"))+"\n      "),t._v(" "),e("inline-svg",{attrs:{src:"/icons/chevron-right.svg",height:14}})],1)],2):t._e()],1)}),[],!1,null,null,null);e.a=component.exports},1274:function(t,e,n){var content=n(1445);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("3cb15d16",content,!0,{sourceMap:!1})},1444:function(t,e,n){"use strict";n(1274)},1445:function(t,e,n){var r=n(38)((function(i){return i[1]}));r.push([t.i,".dark-mode .dashboard-line{background-color:#242426}",""]),r.locals={},t.exports=r},1585:function(t,e,n){"use strict";n.r(e);n(8),n(7),n(10),n(4),n(11);var r=n(0),o=n(1),c=(n(52),n(27),n(17),n(15),n(3),n(2),n(42),n(41),n(32),n(16)),l=n(1141),d=n(990),m=n(1203),h=n(1144);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={name:"pages-dashboard",middleware:["auth_general","auth_salon"],mixins:[l.a,d.a],components:{DashboardCard:m.a,EServiceCard:h.a},nuxtI18n:{paths:{az:"/idareetme-paneli/:type"}},head:function(){return this.$headMeta({title:this.$t("dashboard")})},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,r=t.route,o=t.app,e.next=3,n.dispatch("getAnnouncementStats",{id:o.$getDashboardId(r.params.type)});case 3:return e.abrupt("return",{pending:!1,supportContacts:[{phone:"*8787"},{email:"sales@al.ventures"}]});case 4:case"end":return e.stop()}}),e)})))()},computed:v(v({},Object(c.c)(["messages"])),{},{tabs:function(){return[{title:this.$t("fines"),description:null,value:null,icon:"receipe",url:"/garage",hasAction:!1,image:"penalties",isAvailable:!0},{title:"Super təklif",description:null,value:null,icon:"createshop",url:"/super-offers",hasAction:!1,image:"super-offer",isAvailable:!1}]},cards:function(){var t,e,n,r,o,c,l,d,m=Number(this.$route.params.type);[1,2].includes(m)&&(t=1==m?this.$auth.user.autosalon.balance:this.$auth.user.part_salon.balance,e=1==m?null===(n=this.$auth.user.autosalon)||void 0===n||null===(r=n.current_package)||void 0===r?void 0:r.name[this.locale]:null===(o=this.$auth.user.part_salon)||void 0===o||null===(c=o.current_package)||void 0===c?void 0:c.name[this.locale]);3==m&&(t=this.$auth.user.external_salon.balance,e=null===(l=this.$auth.user.external_salon)||void 0===l||null===(d=l.current_package)||void 0===d?void 0:d.name[this.locale]);return[{key:"packages",title:this.$t("my_packages"),url:"/profile/packages",icon:"packages",image:"packages",actionName:"".concat(this.$t("get_package"))},{key:"announcements",title:"".concat(this.$t("my_announces")),url:"/profile/announcements?type="+m,icon:"photo",image:"announcement",hasAction:!0,actionName:"".concat(this.$t("place_an_ad")),actionLink:"/sell"},{key:"balance",title:"".concat(this.$t("ads_balans")),url:"/profile/balance",icon:"wallet",image:"wallet",hasAction:!0,actionName:"".concat(this.$t("replenish")),actionLink:"/profile/balance",description:"".concat(this.$t("balance_of_wallet")),value:"".concat(t," ALManat")},{key:"statistics",title:"".concat(this.$t("statistics_ads")),url:"/dashboard/"+m+"/statistics",icon:"analytics",image:"pie-chart"},{key:"messages",title:"".concat(this.$t("messages")),url:"/profile/messages",icon:"chat",image:"messages",isMessage:!0,messageCounts:[this.myAnnouncementStats.message_count,this.myAnnouncementStats.message_count_not_read]},{key:"salon",title:"".concat(this.$t("salon_profile")),url:"/dashboard/"+m+"/settings",icon:"salon_profile",image:"salon_profile",description:"".concat(this.$t("salon")," “").concat(this.salonDetails.name,"”")},{key:"contract",title:"".concat(this.$t("contract")),url:"/agreement",icon:"calendar-1",image:"calendar",hasAction:!0,isContract:!0,contractName:e,contractEndDate:this.myAnnouncementStats.agreement_end_date}]},crumbs:function(){return[{name:this.$t("dashboard")}]},salonDetails:function(){var t,e,n,r,o,c=this.$getDashboardId(this.$route.params.type)==(null===(t=this.user.part_salon)||void 0===t?void 0:t.id),l=(null===(e=this.user.autosalon)||void 0===e?void 0:e.current_package)||(null===(n=this.user.external_salon)||void 0===n?void 0:n.current_package)||{},d=null!==(r=this.user.external_salon)&&void 0!==r&&r.id?this.user.external_salon:this.user[c?"part_salon":"autosalon"];return{isShop:c,short_description:d.short_description||"",name:d.name||this.user.full_name,balance:this.$sum(this.user.balance,d.balance),unlimited:1===(null==d?void 0:d.status)&&(null==d?void 0:d.is_unlimited),packageName:c?"":"<span style='".concat(l.color?"color: "+l.color:"","'>").concat(null===(o=l.name)||void 0===o?void 0:o[this.locale],"</span>")}},notreadMsgCount:function(){var t=this;return this.messages.filter((function(e){return e.last_message&&!e.last_message.is_read&&parseInt(e.last_message.sender_id)!==parseInt(t.user.id)})).length},shouldExtendContract:function(){return this.announcementStats.contract.left_days<5},haveBalanceToPay:function(){return parseFloat(this.announcementStats.contract.price)<=this.user.balance}}),methods:{extendContract:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.pending){e.next=2;break}return e.abrupt("return");case 2:return t.pending=!0,e.prev=3,e.next=6,t.$axios.$post("/payment/renew-package?is_mobile=".concat(t.isMobileBreakpoint),{autosalon_id:t.$getDashboardId(t.$route.params.type),type:t.paymentMethod});case 6:if(n=e.sent,"card"!==t.paymentMethod){e.next=12;break}t.pending=!1,t.handlePayment(n,!1,t.$t("renew_package")),e.next=17;break;case 12:return e.next=14,Promise.all([t.$nuxt.refresh(),t.$auth.fetchUser()]);case 14:t.pending=!1,t.showPaymentModal=!1,t.updatePaidStatus({type:"success",text:t.$t("renew_package"),title:t.$t("success_payment")});case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),t.pending=!1;case 22:case"end":return e.stop()}}),e,null,[[3,19]])})))()}}},y=(n(1444),n(12)),component=Object(y.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"pages-dashboard pt-2 pt-lg-5"},[e("div",{staticClass:"container"},[e("breadcrumbs",{attrs:{crumbs:t.crumbs}}),t._v(" "),e("div",{staticClass:"row mb-n2 mb-lg-n3"},[t._l(t.cards,(function(n,r){return e("div",{key:r,staticClass:"col-lg-3 mb-2 mb-lg-3"},[e("e-service-card",{attrs:{"should-extend-contract":t.shouldExtendContract,item:n},on:{showPayment:function(e){t.showPaymentModal=!0}}})],1)})),t._v(" "),e("div",{staticClass:"col-lg-3 mb-2 mb-lg-3"},[e("dashboard-card",{key:"support",staticStyle:{height:"230px"}},[e("div",{staticClass:"d-flex flex-column justify-content-center align-items-center full-height pt-2 pb-2"},t._l(t.supportContacts,(function(n,i){return e("div",{key:i,staticClass:"support-contact"},[e("h5",[n.phone?e("a",{attrs:{href:"tel:".concat(n.phone)}},[t._v("\n                           "+t._s(n.phone)+"\n                        ")]):n.email?e("a",{attrs:{href:"mailto:".concat(n.email)}},[t._v("\n                           "+t._s(n.email)+"\n                        ")]):t._e()])])})),0)])],1),t._v(" "),e("modal-popup",{attrs:{toggle:t.showPaymentModal,title:t.$t("extend_subscription")},on:{close:function(e){t.showPaymentModal=!1}}},[e("form",{staticClass:"form",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.extendContract.apply(null,arguments)}}},[t.announcementStats.contract.left_days>0?e("p",{domProps:{innerHTML:t._s(t.$t("pay_till_date",{date:t.announcementStats.contract.end_date}))}}):e("p",[t._v(t._s(t.$t("pay_to_continue")))]),t._v(" "),e("h4",[t._v(t._s(t.$t("payment_method")))]),t._v(" "),e("div",{staticClass:"mb-2 mb-lg-0"},[e("form-buttons",{attrs:{options:t.paymentMethodOptions,"group-by":2},model:{value:t.paymentMethod,callback:function(e){t.paymentMethod=e},expression:"paymentMethod"}})],1),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("span",{staticClass:"total-price"},[e("span",[t._v(t._s(t.$t("total")))]),t._v(" "),e("strong",[t._v(t._s(t.announcementStats.contract.price)+" ₼")])])]),t._v(" "),e("div",{staticClass:"col-6"},[e("button",{class:["btn btn--green full-width",{pending:t.pending}],attrs:{type:"submit"}},[t._v("\n                        "+t._s(t.$t("confirm"))+"\n                     ")])])])])])],2),t._v(" "),t.user.parent_id?e("hr",{staticClass:"dashboard-line"}):t._e(),t._v(" "),t.user.parent_id?e("div",{staticClass:"row mb-n2 mb-lg-n3"},t._l(t.tabs,(function(n){return n.isAvailable?e("div",{staticClass:"col-lg-3 mb-2 mb-lg-3"},[e("e-service-card",{attrs:{item:n}})],1):t._e()})),0):t._e()],1)])}),[],!1,null,null,null);e.default=component.exports}}]);