(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{1008:function(t,e,n){"use strict";var r={props:{title:String,firstCollapsed:Boolean,titleWithLine:Boolean,titleWithHr:Boolean,animate:Boolean},data:function(){return{collapsed:this.firstCollapsed}},beforeDestroy:function(){this.collapsed=!1}},o=n(12),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"collapse-content"},[e(t.titleWithLine||t.titleWithHr?"h2":"h3",{tag:"component",class:{"title-with-line":t.titleWithLine},on:{click:function(e){t.collapsed=!t.collapsed}}},[e("span",[t._v(t._s(t.title))]),t._v(" "),e("icon",{staticClass:"cursor-pointer",attrs:{name:"chevron-".concat(t.collapsed?"down":"up")}})],1),t._v(" "),e(t.animate?"transition-expand":"div",{tag:"component"},[t.collapsed?t._e():e("div",[t.titleWithHr?e("hr"):t._e(),t._v(" "),t._t("default")],2)])],1)}),[],!1,null,null,null);e.a=component.exports},1010:function(t,e,n){var content=n(1026);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("59c956cd",content,!0,{sourceMap:!1})},1025:function(t,e,n){"use strict";n(1010)},1026:function(t,e,n){var r=n(38)((function(i){return i[1]}));r.push([t.i,".comeBack[data-v-ef9a5fea]{align-items:center;background-color:#fff;border-radius:4px;display:flex;height:58px;margin:20px 0;padding:0 20px;width:100%}.comeBack i[data-v-ef9a5fea]:before{font-size:15px}.comeBack__text[data-v-ef9a5fea]{color:#081a3e;font-size:15px;font-weight:500;line-height:18px;margin:0 22px}.comeBack__line[data-v-ef9a5fea]{background-color:#081a3e;border-radius:100px;height:1px;width:100%}.dark-mode .comeBack[data-v-ef9a5fea]{background-color:#242426}.dark-mode .comeBack__text[data-v-ef9a5fea]{color:#fff}.dark-mode .comeBack__line[data-v-ef9a5fea]{background-color:#fff}",""]),r.locals={},t.exports=r},1028:function(t,e,n){"use strict";var r={props:{text:{type:String,default:"Text"}}},o=(n(1025),n(12)),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"comeBack",on:{click:function(e){return t.$router.go(-1)}}},[e("icon",{attrs:{name:"chevron-left"}}),t._v(" "),e("span",{staticClass:"comeBack__text"},[t._v(t._s(t.text))]),t._v(" "),e("span",{staticClass:"comeBack__line"})],1)}),[],!1,null,"ef9a5fea",null);e.a=component.exports},1143:function(t,e,n){"use strict";var r={props:{list:{type:Array,required:!0}},data:function(){return{activeAccordionIndex:null}},methods:{toggleAccordion:function(t){this.activeAccordionIndex===t?this.activeAccordionIndex=null:this.activeAccordionIndex=t}}},o=n(12),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"accordion"},t._l(t.list,(function(n,r){return e("div",{key:r,staticClass:"accordion__item",class:{"accordion__item--active":t.activeAccordionIndex===r}},[e("div",{staticClass:"accordion__header",on:{click:function(e){return t.toggleAccordion(r)}}},[e("div",{staticClass:"accordion__header__title"},[t._v("\n        "+t._s(n.title)+"\n      ")]),t._v(" "),e("div",{staticClass:"accordion__header__toggle",class:{"accordion__header__toggle--active":t.activeAccordionIndex===r}},[e("icon",{attrs:{name:"chevron-down"}})],1)]),t._v(" "),e("transition-expand",[t.activeAccordionIndex===r?e("div",[e("div",{staticClass:"accordion__body"},[t._v("\n          "+t._s(n.text)+"\n        ")])]):t._e()])],1)})),0)}),[],!1,null,null,null);e.a=component.exports},1259:function(t,e,n){var content=n(1414);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("6700185b",content,!0,{sourceMap:!1})},1413:function(t,e,n){"use strict";n(1259)},1414:function(t,e,n){var r=n(38)((function(i){return i[1]}));r.push([t.i,"table[data-v-86385d60]{background:#fff;border:1px solid #cdd5df;border-collapse:separate;border-radius:12px;width:100%}td[data-v-86385d60],th[data-v-86385d60]{border-top:1px solid #cdd5df;font-size:14px;font-weight:500;letter-spacing:0;line-height:20px;padding:20px 12px}td[data-v-86385d60]:last-child,th[data-v-86385d60]:last-child{text-align:right}th[data-v-86385d60]{border-top:none}td[data-v-86385d60]:first-child,th[data-v-86385d60]:first-child{border-left:none}.table-agreement-detail tr:first-child td[data-v-86385d60]{border-top:0}.btn[data-v-86385d60]{align-items:center;border:1px solid #d1d5db;border-radius:8px;display:flex;justify-content:center;margin-left:5px;margin-right:5px}.btn[data-v-86385d60],.btn[data-v-86385d60]:focus,.btn[data-v-86385d60]:hover{background-color:#fff;color:#1f2937}.btn[data-v-86385d60]:focus,.btn[data-v-86385d60]:hover{border:1px solid #9b9fa7}.agreementDetails[data-v-86385d60]{bottom:0;display:none;left:0;padding:20px;position:absolute;width:100%}.agreementDetails .agreementDetails__title[data-v-86385d60]{color:#081a3e;font-size:16px;font-weight:500;line-height:19px;margin:0 0 20px}.agreementDetails .agreementDetails__content[data-v-86385d60]{display:flex;gap:20px}.agreementDetails .agreementDetails__content .divider[data-v-86385d60]{max-width:800px;width:100%}.agreementDetails .agreementDetails__content .divider[data-v-86385d60]:last-child{max-width:300px;width:100%}.agreementDetails .agreementDetails__content-head[data-v-86385d60]{align-items:center;background-color:#d6e4f8;border-radius:4px;display:flex;justify-content:space-between;padding:16px 20px}.agreementDetails .agreementDetails__content-head_item span[data-v-86385d60]{color:#081a3e;font-size:14px;line-height:17px}.agreementDetails .agreementDetails__content-head_item span[data-v-86385d60]:last-child{color:#246eb2;font-weight:600}.agreementDetails .agreementDetails__content-price[data-v-86385d60]{align-items:center;border:1px solid #d6e4f8;border-radius:4px;display:flex;flex-direction:column;padding:32px 0}.agreementDetails .agreementDetails__content-price_item[data-v-86385d60]{min-width:120px}.agreementDetails .agreementDetails__content-price_item[data-v-86385d60]:not(:first-child){margin-top:24px}.agreementDetails .agreementDetails__content-price_item span[data-v-86385d60]{color:#081a3e;display:inline-block;font-size:16px;line-height:19px}.agreementDetails .agreementDetails__content-price_item span[data-v-86385d60]:last-child{color:#f81734;font-weight:600;margin-left:8px}.accordion[data-v-86385d60]{border-radius:12px;box-shadow:0 0 24px 0 rgba(0,0,0,.102);gap:16px;margin-top:16px;width:100%}.accordion__header[data-v-86385d60]{height:auto;padding:16px 24px}.accordion__body[data-v-86385d60]{border-radius:0 0 12px 12px;padding:16px 24px}.accordion__item .accordion__header[data-v-86385d60]{border-radius:12px;padding:16px 24px}.accordion__item--active .accordion__header[data-v-86385d60]{border-radius:12px 12px 0 0;padding:16px 24px}.mobile-accordion-table-title[data-v-86385d60]{color:#585c5e;font-size:15px;font-weight:400;letter-spacing:0;line-height:20px}.mobile-accordion-table-content[data-v-86385d60]{color:#24282a;font-size:16px;font-weight:500;letter-spacing:0;line-height:20px}.w-50[data-v-86385d60]{width:50%}.w-25[data-v-86385d60]{width:25%}.badge[data-v-86385d60]{border-radius:8px;float:right;font-size:16px;font-weight:500;letter-spacing:0;margin-right:25px;padding:12px 16px;text-align:left;width:-moz-max-content;width:max-content}.badge.badge-success[data-v-86385d60]{background:#ecfdf3;border:1px solid #ecfdf3;color:#039855}.badge.badge-danger[data-v-86385d60]{background:#fef3f2;border:1px solid #fef3f2;color:#f81734}.badge.badge-primary[data-v-86385d60]{background:#24282a;border:1px solid #24282a;color:#24282a}.accordion table[data-v-86385d60],.accordion table tr[data-v-86385d60],.accordion table tr td[data-v-86385d60],.accordion table tr th[data-v-86385d60]{border:none!important;border-radius:0!important}.dark-mode .tabs .tabs__item[data-v-86385d60]{color:#cdd5df}.dark-mode .tabs .tabs__item.active[data-v-86385d60],.dark-mode .tabs .tabs__item[data-v-86385d60]:focus,.dark-mode .tabs .tabs__item[data-v-86385d60]:hover{color:#eef2f6}.dark-mode .card[data-v-86385d60],.dark-mode .card.card-gray[data-v-86385d60]{background-color:#1b2434;border:1px solid #1b2434}.dark-mode .balance-info p[data-v-86385d60]{color:#9aa4b2}.dark-mode table[data-v-86385d60]{background:#1b2434;border:1px solid #1b2434;border-collapse:separate;border-radius:12px;width:100%}.dark-mode td[data-v-86385d60],.dark-mode th[data-v-86385d60]{border-top:1px solid #364152;color:#cdd5df;font-size:14px}.dark-mode td[data-v-86385d60]:last-child,.dark-mode th[data-v-86385d60]:last-child{text-align:right}.dark-mode th[data-v-86385d60]{border-top:none}.dark-mode td[data-v-86385d60]:first-child,.dark-mode th[data-v-86385d60]:first-child{border-left:none}.dark-mode .mobile-accordion-table-title[data-v-86385d60]{color:#cdd5df}.dark-mode .mobile-accordion-table-content[data-v-86385d60]{color:#fff}.dark-mode .accordion__body[data-v-86385d60],.dark-mode .accordion__header[data-v-86385d60]{background:#1b2434}",""]),r.locals={},t.exports=r},1559:function(t,e,n){"use strict";n.r(e);n(17),n(8),n(7),n(3),n(10),n(4),n(11);var r=n(0),o=n(1),c=(n(32),n(15),n(2),n(42),n(41),n(586),n(221),n(63),n(16)),d=n(990),l=n(1028),_=n(1008);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={components:{Accordion:n(1143).a,ComeBack:l.a,CollapseContent:_.a},layout:"garageLayout",head:function(){return this.$headMeta({title:this.$t("agreements")})},mixins:[d.a],data:function(){return{activeAgreement:1,activeAccordionIndex:null,activeAgreementDetail:{id:0,is_expired:!1,payment:{is_paid:!1},package:{announce_count:0,service_price:0},start_date:"",end_date:"",price:0},openModal:!1,openViewModal:!1,pending:!1,duration:1,payment_type:"card",selectedPackage:{}}},methods:{toggleAccordion:function(t){this.activeAccordionIndex===t?this.activeAccordionIndex=null:this.activeAccordionIndex=t},handleSubmit:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var data,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.pending=!0,"/payment/package",data={package_id:t.findUnpaid.package.id,payment_type:t.payment_type,name:t.user.autosalon.name,days_type:t.duration},e.prev=2,e.next=5,t.$axios.$post("".concat("/payment/package","?is_mobile=").concat(t.isMobileBreakpoint),data);case 5:if(null!=(r=e.sent)&&null!==(n=r.data)&&void 0!==n&&n.redirect_url){e.next=13;break}return e.next=9,t.$nuxt.refresh();case 9:return e.next=11,t.updatePaidStatus({type:"success",title:t.$t("success_payment")});case 11:e.next=16;break;case 13:return e.next=15,t.handlePayment(r,!1,t.$t("success_payment"));case 15:t.pending=t.openModal=!1;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),t.pending=!1;case 21:case"end":return e.stop()}}),e,null,[[2,18]])})))()},downloadInvoice:function(t){this.$axios.$get("/invoice/".concat(t,"/download"),{responseType:"blob"}).then((function(t){var e=new Blob([t],{type:"application/pdf"}),link=document.createElement("a");link.href=URL.createObjectURL(e),link.download="invoice.pdf",link.click(),URL.revokeObjectURL(link.href)}))},openViewPopup:function(t){this.openViewModal=!0,this.activeAgreementDetail=t,this.activeAgreement=t.id}},computed:m(m({},Object(c.c)({getAgreements:"getAgreements"})),{},{crumbs:function(){return[{name:this.$t("dashboard"),route:"".concat(this.user.autosalon?"/dashboard/1":"/garage-services")},{name:this.$t("agreements")}]},totalBalance:function(){var t,e,n;return this.$sum(this.user.balance,(null===(t=this.user.autosalon)||void 0===t?void 0:t.balance)||0,(null===(e=this.user.part_salon)||void 0===e?void 0:e.balance)||0,(null===(n=this.user.external_salon)||void 0===n?void 0:n.balance)||0)},findUnpaid:function(){return this.getAgreements.find((function(t){return!1===t.payment.is_paid}))}}),mounted:function(){this.selectedPackage=JSON.parse(localStorage.getItem("selectedPackage"))},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.next=3,n.dispatch("fetchAgreements");case 3:case"end":return e.stop()}}),e)})))()}},h=f,x=(n(1413),n(12)),component=Object(x.a)(h,(function(){var t,e,n,r=this,o=r._self._c;return o("div",{staticClass:"agreementPage"},[o("div",{},[o("portal",{attrs:{to:"breadcrumbs"}},[o("breadcrumbs",{attrs:{crumbs:r.crumbs}})],1),r._v(" "),o(r.isMobileBreakpoint?"mobile-screen":"div",{tag:"component",attrs:{"bar-title":r.$t("agreements"),"height-auto":""},on:{back:function(t){r.$router.push(r.pageRef||r.$localePath("/profile/agreement"))}}},[r.isMobileBreakpoint?r._e():o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-12 mb-4"},[o("h1",[r._v(r._s(r.$t("agreements")))])])]),r._v(" "),o("div",{staticClass:"row"},[r.isMobileBreakpoint?r._e():o("div",{staticClass:"col-md-12"},[r.getAgreements.length>0?o("table",{staticClass:"table"},[o("thead",[o("tr",[r.isMobileBreakpoint?r._e():o("th",{staticClass:"text-center"},[r._v(r._s(r.$t("invoice_date")))]),r._v(" "),r.isMobileBreakpoint?r._e():o("th",{staticClass:"text-center"},[r._v(r._s(r.$t("invoice_number")))]),r._v(" "),r.isMobileBreakpoint?r._e():o("th",{staticClass:"text-center"},[r._v(r._s(r.$t("type_of_service")))]),r._v(" "),o("th",{staticClass:"text-center"},[r._v(r._s(r.$t("payment_amount")))]),r._v(" "),o("th",{staticClass:"text-center"},[r._v(r._s(r.$t("status_and_date")))]),r._v(" "),o("th",{staticClass:"text-center"},[r._v(r._s(r.$t("transactions")))])])]),r._v(" "),o("tbody",r._l(r.getAgreements,(function(t,i){return o("tr",{key:i+1},[r.isMobileBreakpoint?r._e():o("td",[r._v(r._s(r.$moment(t.start_date).format("DD.MM.YYYY")))]),r._v(" "),r.isMobileBreakpoint?r._e():o("td",{staticClass:"text-center"},[r._v(r._s(t.id))]),r._v(" "),r.isMobileBreakpoint?r._e():o("td",{staticClass:"text-center"},[r._v(r._s(t.package.name[r.locale])+" "+r._s(r.$t("package3")))]),r._v(" "),o("td",{staticClass:"text-center"},[r._v(r._s(t.price)+" AZN")]),r._v(" "),o("td",{staticClass:"text-center",class:["status",{not_paid:!t.payment.is_paid&&!t.is_expired,is_expired:t.is_expired}]},[!1===t.is_expired?o("span",[r._v(r._s(t.payment.is_paid?r.$t("already_paid"):r.$t("not_paid")))]):o("span",[r._v(r._s(r.$t("overdue"))+" | "+r._s(r.$moment(t.end_date).format("DD.MM.YYYY")))])]),r._v(" "),o("td",[o("div",{staticClass:"btns d-flex justify-content-center align-items-center"},[!t.payment.is_paid||t.is_expired?o("button",{staticClass:"btn btn-pay",on:{click:function(t){r.openModal=!0}}},[r._v("\n                                 "+r._s(r.$t("pay"))+"\n                              ")]):[o("button",{staticClass:"btn btn-download",on:{click:function(e){return r.downloadInvoice(t.id)}}},[r._v("\n                                    "+r._s(r.$t("download_invoice"))+" "),o("inline-svg",{attrs:{src:"/icons/download1.svg"}})],1)],r._v(" "),o("button",{staticClass:"btn btn-view",on:{click:function(e){return r.openViewPopup(t)}}},[r._v("\n                                 "+r._s(r.$t("view"))+" "),o("inline-svg",{attrs:{src:"/icons/eye1.svg"}})],1)],2)])])})),0)]):[o("table",{staticClass:"table"},[o("tr",[o("td",{staticClass:"text-center",staticStyle:{border:"0"},attrs:{colspan:"6"}},[r._v("\n                           "+r._s(r.$t("no_agreements"))+"\n                        ")])])])]],2),r._v(" "),r.isMobileBreakpoint?o("div",{staticClass:"col-md-12 pb-5"},[o("div",{staticClass:"accordion"},r._l(r.getAgreements,(function(t,e){return o("div",{key:e,staticClass:"accordion__item",class:{"accordion__item--active":r.activeAccordionIndex===e}},[o("div",{staticClass:"accordion__header",on:{click:function(t){return r.toggleAccordion(e)}}},[o("div",{staticClass:"accordion__header__title w-100 d-flex align-items-center justify-content-between"},[o("div",{staticClass:"w-50"},[r._v("\n                              "+r._s(t.package.name[r.locale])+" "+r._s(r.$t("package3"))+"\n                           ")]),r._v(" "),o("div",{staticClass:"w-50"},[!1===t.is_expired?o("div",{staticClass:"badge",class:t.payment.is_paid?"badge-success":"badge-primary"},[r._v("\n                                 "+r._s(t.payment.is_paid?r.$t("already_paid"):r.$t("not_paid"))+"\n                              ")]):o("div",{staticClass:"badge badge-danger"},[r._v("\n                                 "+r._s(r.$t("overdue"))+" | "+r._s(r.$moment(t.end_date).format("DD.MM.YYYY"))+"\n                              ")])])]),r._v(" "),o("div",{staticClass:"accordion__header__toggle",class:{"accordion__header__toggle--active":r.activeAccordionIndex===e}},[o("icon",{attrs:{name:"chevron-down"}})],1)]),r._v(" "),o("transition-expand",[r.activeAccordionIndex===e?o("div",[o("div",{staticClass:"accordion__body p-0"},[o("table",[o("tr",[o("td",[o("div",{staticClass:"mobile-accordion-table-title"},[r._v(r._s(r.$t("status_and_date")))]),r._v(" "),o("div",{class:["status",{not_paid:!t.payment.is_paid&&!t.is_expired,is_expired:t.is_expired}]},[!1===t.is_expired?o("span",[r._v(r._s(t.payment.is_paid?r.$t("already_paid"):r.$t("not_paid")))]):o("span",[r._v(r._s(r.$t("overdue"))+" | "+r._s(r.$moment(t.end_date).format("DD.MM.YYYY")))])])]),r._v(" "),o("td",[o("div",{staticClass:"mobile-accordion-table-title"},[r._v(r._s(r.$t("payment_amount")))]),r._v(" "),o("div",{staticClass:"mobile-accordion-table-content"},[r._v(r._s(t.price)+" AZN")])])]),r._v(" "),o("tr",[o("td",[o("div",{staticClass:"mobile-accordion-table-title"},[r._v(r._s(r.$t("invoice_date")))]),r._v(" "),o("div",{staticClass:"mobile-accordion-table-content"},[r._v(r._s(r.$moment(t.start_date).format("DD.MM.YYYY")))])]),r._v(" "),o("td",[o("div",{staticClass:"mobile-accordion-table-title"},[r._v(r._s(r.$t("invoice_number")))]),r._v(" "),o("div",{staticClass:"mobile-accordion-table-content"},[r._v(r._s(t.id))])])]),r._v(" "),o("tr",[o("td",[o("div",{staticClass:"d-flex w-100 align-items-center justify-content-start"},[!t.payment.is_paid||t.is_expired?o("button",{staticClass:"btn btn-pay",on:{click:function(t){r.openModal=!0}}},[r._v("\n                                             "+r._s(r.$t("pay"))+"\n                                          ")]):[o("button",{staticClass:"btn btn-download",on:{click:function(e){return r.downloadInvoice(t.id)}}},[r._v("\n                                                "+r._s(r.$t("download_invoice"))+" "),o("inline-svg",{attrs:{src:"/icons/download1.svg"}})],1)]],2)]),r._v(" "),o("td",[o("div",{staticClass:"d-flex w-100 align-items-center justify-content-end"},[o("button",{staticClass:"btn btn-view pull-right",on:{click:function(e){return r.openViewPopup(t)}}},[r._v("\n                                             "+r._s(r.$t("view"))+" "),o("inline-svg",{attrs:{src:"/icons/eye1.svg"}})],1)])])])])])]):r._e()])],1)})),0)]):r._e()])]),r._v(" "),o("modal-popup",{attrs:{toggle:r.openViewModal,title:r.$t("agreement_details"),"modal-class":"larger viewAgreement"},on:{close:function(t){r.openViewModal=!1}}},[o("table",{staticClass:"table table-agreement-detail"},[o("tr",[o("td",[r._v(r._s(r.$t("paid_ads")))]),r._v(" "),o("td",[r._v(r._s(r.activeAgreementDetail.package.announce_count))])]),r._v(" "),o("tr",[o("td",[r._v(r._s(r.$t("paid_services")))]),r._v(" "),o("td",[r._v(r._s(r.activeAgreementDetail.package.service_price)+" AZN")])]),r._v(" "),o("tr",[o("td",[r._v(r._s(r.$t("package_duration")))]),r._v(" "),o("td",[r._v(r._s(r.$moment(r.activeAgreementDetail.start_date).format("DD.MM.YYYY"))+" - "+r._s(r.$moment(r.activeAgreementDetail.end_date).format("DD.MM.YYYY")))])]),r._v(" "),o("tr",[o("td",[r._v(r._s(r.$t("vat")))]),r._v(" "),o("td",[r._v(r._s(r.activeAgreementDetail.price)+" AZN")])]),r._v(" "),o("tr",[o("td",[r._v(r._s(r.$t("total")))]),r._v(" "),o("td",[r._v(r._s(r.activeAgreementDetail.price)+" AZN")])])]),r._v(" "),o("div",{staticClass:"modal-sticky-bottom"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-lg-12 mt-2 mt-lg-0 p-1"},[o("div",{staticClass:"btns d-flex justify-content-center align-items-center"},[!r.activeAgreementDetail.payment.is_paid||r.activeAgreementDetail.is_expired?o("button",{staticClass:"btn btn-pay",on:{click:function(t){r.openModal=!0,r.openViewModal=!1}}},[r._v("\n                        "+r._s(r.$t("pay"))+"\n                     ")]):o("button",{staticClass:"btn btn-download",on:{click:function(t){return r.downloadInvoice(r.activeAgreementDetail.id)}}},[r._v("\n                        "+r._s(r.$t("download_invoice"))+" "),o("inline-svg",{attrs:{src:"/icons/download1.svg"}})],1)])])])])]),r._v(" "),o("modal-popup",{attrs:{toggle:r.openModal,title:r.$t("ads_balans"),"modal-class":"larger packages"},on:{close:function(t){r.openModal=!1}}},[o("h4",{staticClass:"paymentMethods mb-3"},[r._v(r._s(r.$t("payment_method")))]),r._v(" "),o("label",{staticClass:"radio-container"},[r._v("\n            "+r._s(r.$t("pay_with_card"))+"\n            "),o("input",{attrs:{type:"radio",name:"payment_type",checked:""},on:{change:function(t){r.payment_type="card"}}}),r._v(" "),o("span",{staticClass:"checkmark"})]),r._v(" "),this.$auth.loggedIn&&r.totalBalance>0?o("label",{staticClass:"radio-container"},[r._v("\n            "+r._s(r.$t("balans"))+"\n            "),o("input",{attrs:{type:"radio",name:"payment_type"},on:{change:function(t){r.payment_type="balance"}}}),r._v(" "),o("span",{staticClass:"checkmark"})]):r._e(),r._v(" "),r.totalBalance>0?o("hr"):r._e(),r._v(" "),r.totalBalance>0?o("div",{staticClass:"terminal-section"},[r._v("\n            "+r._s(r.$t("balans"))+": "),o("span",{staticStyle:{"margin-right":"20px"}},[r._v(r._s(r.totalBalance))]),r._v("\n            "+r._s(r.$t("package_price"))+": "+r._s((null===(t=r.selectedPackage)||void 0===t?void 0:t.price)*r.duration)+" AZN\n         ")]):r._e(),r._v(" "),r.totalBalance<1?o("hr"):r._e(),r._v(" "),r.totalBalance<1?o("div",{staticClass:"terminal-section"},[r._v("\n            "+r._s(r.$t("package_price"))+" "+r._s((null===(e=r.getAgreements[0])||void 0===e?void 0:e.price)||(null===(n=r.selectedPackage)||void 0===n?void 0:n.price)*r.duration)+" AZN\n         ")]):r._e(),r._v(" "),o("div",{staticClass:"modal-sticky-bottom"},[o("hr"),r._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-lg-12 mt-2 mt-lg-0"},[o("button",{class:["btn btn--green full-width",{pending:r.pending}],on:{click:r.handleSubmit}},[r._v("\n                     "+r._s(r.$t("pay"))+"\n                  ")])])])])])],1)])}),[],!1,null,"86385d60",null);e.default=component.exports},990:function(t,e,n){"use strict";n.d(e,"a",(function(){return C}));n(8),n(7),n(3),n(10),n(4),n(11);var r=n(1),o=n(0),c=(n(32),n(63),n(2),n(35),n(16)),d=n(274),l=n(996),_={props:{popupName:{type:String,default:"payment-popup"}},methods:{show:function(){this.$nuxt.$emit("show-terminal-info",this.popupName)}}},v=n(12),m=Object(v.a)(_,(function(){var t=this,e=t._self._c;return e("p",{staticClass:"info-text text-left"},[e("inline-svg",{attrs:{src:"/icons/alert-circle.svg"}}),t._v(" "),e("span",{staticClass:"text-medium cursor-pointer text-red",on:{click:t.show}},[t._v(t._s(t.$t("pay_with_terminal")))])],1)}),[],!1,null,null,null).exports;n(17);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var h={props:{name:{type:String,default:"payment-popup"}},data:function(){return{showTerminalInfo:!1}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.c)(["announcement"])),methods:{open:function(t){t===this.name&&(this.showTerminalInfo=!0,this.$emit("open"))},close:function(){this.showTerminalInfo=!1,this.$emit("close")}},mounted:function(){this.$nuxt.$on("show-terminal-info",this.open)},beforeDestroy:function(){this.$nuxt.$off("show-terminal-info",this.open)}},x=h,y=Object(v.a)(x,(function(){var t=this,e=t._self._c;return e("modal-popup",{attrs:{toggle:t.showTerminalInfo,title:t.$t("pay_with_terminal"),"modal-class":"terminal-info-popup"},on:{close:t.close}},[e("div",{staticClass:"phone-section"},[t.announcement.user?e("div",{staticClass:"phone"},[t._v("\n      "+t._s(t.$parsePhone(t.announcement.user.phone))+"\n    ")]):t._e(),t._v(" "),e("span",[t._v("\n      "+t._s(t.$t("mobile_number"))+"\n    ")])]),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"description"},[e("img",{attrs:{src:"/images/milli-on.svg",alt:""}}),t._v(" "),e("span",[t._v(t._s(t.$t("terminal_popup_title")))])]),t._v(" "),e("div",{staticClass:"steps"},t._l(t.$t("terminal_pay_steps"),(function(n,i){return e("div",{key:i,staticClass:"step-item"},[e("div",{staticClass:"step-number"},[e("span",[t._v(t._s(i))])]),t._v(" "),e("div",{staticClass:"step-text"},[t._v(t._s(n))])])})),0),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-7"},[e("p",[t._v("\n       "+t._s(t.$t("terminal_help_description"))+"\n      ")])]),t._v(" "),e("div",{staticClass:"col-md-5"},[e("button",{staticClass:"btn btn--primary-outline full-width",attrs:{type:"button"},on:{click:t.close}},[t._v("\n        "+t._s(t.$t("go_back"))+"\n      ")])])])])}),[],!1,null,null,null).exports;function k(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function w(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var C={mixins:[d.a],components:{SelectBankingCard:l.a,TerminalInfoButton:m,TerminalInfoPopup:y},data:function(){return{showPaymentModal:!1,paymentMethod:"card",bankingCard:""}},mounted:function(){this.selectDefaultCard()},computed:w(w(w({},Object(c.c)({bankingCards:"bankingCards/bankingCards"})),Object(c.c)(["paidStatusData"])),{},{paymentMethodOptions:function(){return[{key:"card",name:this.$t("pay_with_card")},{key:"balance",name:this.$t("pay_with_balance"),disabled:!this.haveBalanceToPay}]}}),methods:w(w({},Object(c.b)(["updatePaidStatus"])),{},{selectDefaultCard:function(){var t=this.bankingCards.find((function(t){return t.default}));t&&(this.bankingCard=t.id)},callUpdatePaidStatus:function(t,text){var e=t?"success":"error";t||(text=this.$t("try_again")),this.updatePaidStatus({type:e,text:text,title:this.$t("".concat(e,"_payment"))})},handlePayment:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],text=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"v1";if(this.isMobileBreakpoint){var c;this.$nuxt.$loading.start(),setTimeout((function(){return e.$nuxt.$loading.finish()}),500),window.location=(null==t||null===(c=t.data)||void 0===c?void 0:c.redirect_url)||t}else{var d,l,_={v1:"width=494,height=718",v2:"width=1042,height=725"}[o];window.open((null==t||null===(d=t.data)||void 0===d?void 0:d.redirect_url)||t,"purchaseservice","toolbar=yes,scrollbars=yes,resizable=yes,top=50,left=100,"+_);var v=null==t||null===(l=t.data)||void 0===l?void 0:l.payment_id;v&&this.connectEcho("purchase.".concat(v),!1).listen("PurchaseInitiated",function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(data){var r,o,c,d,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.showPaymentModal=!1,r=data.payment,o=r.is_paid,c=r.status,d=o||1===c,n=n instanceof Array?n[d?0:1]:n,!d){t.next=17;break}if("attorney_pay"!==data.payment.operation_key){t.next=7;break}return t.abrupt("return",e.$router.push({path:e.$localePath("/garage"),query:{tab:"attorney-list"}}));case 7:if(!e.loggedIn){t.next=10;break}return t.next=10,e.$auth.fetchUser();case 10:if(n){t.next=14;break}return t.next=13,e.$nuxt.refresh();case 13:e.callUpdatePaidStatus(d,text);case 14:localStorage.removeItem("selectedPackage"),t.next=18;break;case 17:e.callUpdatePaidStatus(d);case 18:l=function(){e.connectEcho("purchase.".concat(v),!1).stopListening("PurchaseInitiated")},n?d?e.$router.push(n,(function(){e.callUpdatePaidStatus(d,text),l()})):(e.$store.dispatch("fetchResetForm",!1),e.callUpdatePaidStatus(d,text),l()):l(),"offer_payment_key"==data.payment.operation_key&&d&&setTimeout((function(){e.$router.push("/offer")}),2e3);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}}),watch:{bankingCards:function(t){this.selectDefaultCard()},haveBalanceToPay:function(t){t||(this.paymentMethod="card")}}}},996:function(t,e,n){"use strict";n(15),n(8),n(7),n(3),n(10),n(4),n(11);var r=n(1),o=n(0),c=(n(32),n(20),n(24),n(63),n(2),n(16));function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _={props:{value:{},showCardImage:{type:Boolean,default:!0}},computed:l(l({},Object(c.c)({bankingCards:"bankingCards/bankingCards"})),{},{activeCardId:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},cardOptions:function(){var t=this;return this.bankingCards.map((function(e){return{key:e.id,name:t.$parseCardNum(e.masked_pan).join(" "),icon:"/img/cards/".concat(e.brand.toLowerCase()).concat(t.isDarkMode?"-white":"",".svg"),brand:e.brand}}))},activeCard:function(){var t=this;return this.bankingCards.find((function(e){return e.id===t.activeCardId}))}}),methods:l(l({},Object(c.b)({getBankingCards:"bankingCards/getBankingCards"})),{},{cardNumber:function(t){return this.$parseCardNum(t).map((function(t){return"<span>".concat(t,"</span>")})).join("")}}),fetch:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getBankingCards();case 2:case"end":return e.stop()}}),e)})))()}},v=n(12),component=Object(v.a)(_,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"select-banking-card"},[e("form-select",{attrs:{label:t.$t("pay_with_card"),options:t.cardOptions,"clear-option-text":t.$t("other_card"),"clear-option-pull-down":!0,"has-cards":!0,"skip-select":!0,"img-key":"icon"},model:{value:t.activeCardId,callback:function(e){t.activeCardId=e},expression:"activeCardId"}}),t._v(" "),t.activeCard&&t.showCardImage?e("div",{staticClass:"banking-cards_item mt-3"},[e("div",{staticClass:"card-img"},[e("img",{attrs:{src:"/img/cards/card-".concat(t.activeCard.brand.toLowerCase(),"-").concat(t.activeCard.img,".png"),alt:t.activeCard.brand}})]),t._v(" "),e("div",{staticClass:"card-details d-flex flex-column justify-content-between"},[e("div",{staticClass:"card-top d-flex"}),t._v(" "),e("div",{staticClass:"card-number d-flex justify-content-between",domProps:{innerHTML:t._s(t.cardNumber(t.activeCard.masked_pan))}}),t._v(" "),t._m(0)])]):t._e()],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"card-bottom d-flex"},[t("span",[this._v("**/**")])])}],!1,null,null,null);e.a=component.exports}}]);