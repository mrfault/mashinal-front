(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{1553:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(1),c=(r(32),r(15),r(22),r(8),r(7),r(3),r(2),r(10),r(4),r(11),r(16)),l=r(174);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={head:function(){return this.$headMeta({title:this.$t("registration_marks")})},mixins:[r(990).a],middleware:["sell_tokens"],data:function(){return{pending:!1,region_id:"",region_letter1:"",region_letter2:"",region_number:"",numbers:[{name:"A"},{name:"B"},{name:"C"},{name:"D"},{name:"E"},{name:"F"},{name:"G"},{name:"H"},{name:"I"},{name:"J"},{name:"K"},{name:"L"},{name:"M"},{name:"N"},{name:"O"},{name:"P"},{name:"Q"},{name:"R"},{name:"S"},{name:"T"},{name:"U"},{name:"V"},{name:"W"},{name:"X"},{name:"Y"},{name:"Z"}],currency:[{id:1,name:"AZN"},{id:2,name:"USD"}],form:{car_number:"",price:"",currency_id:1,region_id:1,comment:""}}},methods:{resetForm:function(){for(var e in this.form)this.form[e]="";this.region_id="",this.region_letter1="",this.region_letter2="",this.region_number="",this.$v.$reset()},handleSubmit:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$v.$touch(),!e.$v.$error){t.next=3;break}return t.abrupt("return");case 3:return e.pending=!0,e.form.car_number="".concat(e.region_id.split("-")[0].slice(0,-1)," - ").concat(e.region_letter1).concat(e.region_letter2," - ").concat(e.region_number),t.prev=5,t.next=8,e.$axios.$post("/sell/plate/post/publish?is_mobile=".concat(e.isMobileBreakpoint),e.form);case 8:if(null!=(n=t.sent)&&null!==(r=n.data)&&void 0!==r&&r.redirect_url){t.next=15;break}return t.next=12,e.$nuxt.refresh();case 12:e.updatePaidStatus({type:"success",text:e.$t("announcement_paid"),title:e.$t("success_payment")}),t.next=21;break;case 15:return t.next=17,e.handlePayment(n,e.$localePath("/profile/announcements"),e.$t("announcement_paid"));case 17:if(!e.getResetForm){t.next=20;break}return t.next=20,e.resetForm();case 20:e.pending=!1;case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(5),e.pending=!1;case 26:case"end":return t.stop()}}),t,null,[[5,23]])})))()}},computed:m(m({},Object(c.c)({getRegionNumbers:"getRegionNumbers",cities:"sellOptions",getResetForm:"getResetForm"})),{},{crumbs:function(){return[{name:this.$t("place_an_ad"),route:"/sell"},{name:this.$t("place_an_ad")}]}}),fetch:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.store,t.next=3,r.dispatch("fetchRegionNumbers");case 3:return t.next=5,r.dispatch("getOptions");case 5:case"end":return t.stop()}}),t)})))()},validations:{region_id:{required:l.required},region_letter1:{required:l.required},region_number:{required:l.required,minLength:Object(l.minLength)(3)},form:{price:{required:l.required},currency_id:{required:l.required},region_id:{required:l.required}}}},h=r(12),component=Object(h.a)(f,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"registrationMarks"},[t("div",{staticClass:"container p-0"},[t("breadcrumbs",{attrs:{crumbs:e.crumbs}}),e._v(" "),t("div",{staticClass:"registrationMarks__create"},[t("h4",{staticClass:"registrationMarks__create-title"},[t("span",[e._v(e._s(e.$t("place_an_ad")))]),e._v(" "),t("span")]),e._v(" "),t("div",{staticClass:"registrationMarks__create-inner"},[t("form",{ref:"form",staticClass:"registrationMarks__create-form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[t("div",{staticClass:"col-12 col-xl-6"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-5 col-md-5"},[t("form-select",{attrs:{label:"01 - AbÅŸeron",options:e.getRegionNumbers,invalid:e.$v.region_id.$error,clearPlaceholder:!0,"has-search":""},model:{value:e.region_id,callback:function(t){e.region_id=t},expression:"region_id"}})],1),e._v(" "),t("div",{staticClass:"col-1 col-md-2",staticStyle:{width:"19.4%",flex:"0 0 19.4%","max-width":"19.4%"}},[t("form-select",{attrs:{label:"A",options:e.numbers,invalid:e.$v.region_letter1.$error,clearPlaceholder:!0,"has-search":""},model:{value:e.region_letter1,callback:function(t){e.region_letter1=t},expression:"region_letter1"}})],1),e._v(" "),t("div",{staticClass:"col-1 col-md-2",staticStyle:{width:"19.4%",flex:"0 0 19.4%","max-width":"19.4%"}},[t("form-select",{attrs:{label:"A",options:e.numbers,clearPlaceholder:!0,"has-search":""},model:{value:e.region_letter2,callback:function(t){e.region_letter2=t},expression:"region_letter2"}})],1),e._v(" "),t("div",{staticClass:"col-1 col-md-2",staticStyle:{width:"19.4%",flex:"0 0 19.4%","max-width":"19.4%"}},[t("form-numeric-input",{attrs:{invalid:e.$v.region_number.$error,defaultValue:"",maxlength:3,float:!0},model:{value:e.region_number,callback:function(t){e.region_number=t},expression:"region_number"}})],1)]),e._v(" "),t("div",{staticClass:"row mt-5"},[t("div",{staticClass:"col-5 col-md-5"},[t("form-numeric-input",{attrs:{placeholder:e.$t("price"),invalid:e.$v.form.price.$error,defaultValue:""},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),t("div",{staticClass:"col-3",staticStyle:{width:"29.1%",flex:"0 0 29.1%","max-width":"29.1%"}},[t("form-select",{attrs:{label:"AZN",options:e.currency,invalid:e.$v.form.currency_id.$error,clearPlaceholder:!0,"has-search":""},model:{value:e.form.currency_id,callback:function(t){e.$set(e.form,"currency_id",t)},expression:"form.currency_id"}})],1),e._v(" "),t("div",{staticClass:"col-3 col-md-4",staticStyle:{width:"29.1%",flex:"0 0 29.1%","max-width":"29.1%"}},[t("form-select",{attrs:{label:e.$t("city"),options:e.cities.regions,invalid:e.$v.form.region_id.$error,clearPlaceholder:!0,"has-search":""},model:{value:e.form.region_id,callback:function(t){e.$set(e.form,"region_id",t)},expression:"form.region_id"}})],1)]),e._v(" "),t("div",{staticClass:"row mt-5"},[t("div",{staticClass:"col-12 col-xl-12"},[t("form-textarea",{attrs:{placeholder:e.$t("description2"),maxlength:3e3},model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}})],1)]),e._v(" "),t("div",{staticClass:"row mt-5"},[t("div",{staticClass:"col-12 col-lg-6 col-xl-12"},[t("h5",{staticClass:"registrationMarks__create-note"},[t("inline-svg",{attrs:{src:"/icons/reason.svg"}}),e._v(" "),t("p",{domProps:{innerHTML:e._s(e.$t("registration_marks_text"))}})],1)])]),e._v(" "),t("div",{staticClass:"row mt-5"},[t("div",{staticClass:"col-12 col-lg-6"},[t("button",{class:["btn",{pending:e.pending}]},[e._v("\n                              "+e._s(e.$t("place_announcement"))+"\n                           ")])])])]),e._v(" "),e._m(0)])])])],1)])}),[function(){var e=this._self._c;return e("div",{staticClass:"col-12 col-md-6 d-none d-xl-block"},[e("img",{attrs:{src:"/images/registrationMarks_banner.jpg",alt:"registrationMarks_banner"}})])}],!1,null,null,null);t.default=component.exports},990:function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));r(8),r(7),r(3),r(10),r(4),r(11);var n=r(1),o=r(0),c=(r(32),r(63),r(2),r(35),r(16)),l=r(274),d=r(996),m={props:{popupName:{type:String,default:"payment-popup"}},methods:{show:function(){this.$nuxt.$emit("show-terminal-info",this.popupName)}}},f=r(12),h=Object(f.a)(m,(function(){var e=this,t=e._self._c;return t("p",{staticClass:"info-text text-left"},[t("inline-svg",{attrs:{src:"/icons/alert-circle.svg"}}),e._v(" "),t("span",{staticClass:"text-medium cursor-pointer text-red",on:{click:e.show}},[e._v(e._s(e.$t("pay_with_terminal")))])],1)}),[],!1,null,null,null).exports;r(17);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var _={props:{name:{type:String,default:"payment-popup"}},data:function(){return{showTerminalInfo:!1}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(c.c)(["announcement"])),methods:{open:function(e){e===this.name&&(this.showTerminalInfo=!0,this.$emit("open"))},close:function(){this.showTerminalInfo=!1,this.$emit("close")}},mounted:function(){this.$nuxt.$on("show-terminal-info",this.open)},beforeDestroy:function(){this.$nuxt.$off("show-terminal-info",this.open)}},y=_,O=Object(f.a)(y,(function(){var e=this,t=e._self._c;return t("modal-popup",{attrs:{toggle:e.showTerminalInfo,title:e.$t("pay_with_terminal"),"modal-class":"terminal-info-popup"},on:{close:e.close}},[t("div",{staticClass:"phone-section"},[e.announcement.user?t("div",{staticClass:"phone"},[e._v("\n      "+e._s(e.$parsePhone(e.announcement.user.phone))+"\n    ")]):e._e(),e._v(" "),t("span",[e._v("\n      "+e._s(e.$t("mobile_number"))+"\n    ")])]),e._v(" "),t("hr"),e._v(" "),t("div",{staticClass:"description"},[t("img",{attrs:{src:"/images/milli-on.svg",alt:""}}),e._v(" "),t("span",[e._v(e._s(e.$t("terminal_popup_title")))])]),e._v(" "),t("div",{staticClass:"steps"},e._l(e.$t("terminal_pay_steps"),(function(r,i){return t("div",{key:i,staticClass:"step-item"},[t("div",{staticClass:"step-number"},[t("span",[e._v(e._s(i))])]),e._v(" "),t("div",{staticClass:"step-text"},[e._v(e._s(r))])])})),0),e._v(" "),t("hr"),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-7"},[t("p",[e._v("\n       "+e._s(e.$t("terminal_help_description"))+"\n      ")])]),e._v(" "),t("div",{staticClass:"col-md-5"},[t("button",{staticClass:"btn btn--primary-outline full-width",attrs:{type:"button"},on:{click:e.close}},[e._v("\n        "+e._s(e.$t("go_back"))+"\n      ")])])])])}),[],!1,null,null,null).exports;function w(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var k={mixins:[l.a],components:{SelectBankingCard:d.a,TerminalInfoButton:h,TerminalInfoPopup:O},data:function(){return{showPaymentModal:!1,paymentMethod:"card",bankingCard:""}},mounted:function(){this.selectDefaultCard()},computed:C(C(C({},Object(c.c)({bankingCards:"bankingCards/bankingCards"})),Object(c.c)(["paidStatusData"])),{},{paymentMethodOptions:function(){return[{key:"card",name:this.$t("pay_with_card")},{key:"balance",name:this.$t("pay_with_balance"),disabled:!this.haveBalanceToPay}]}}),methods:C(C({},Object(c.b)(["updatePaidStatus"])),{},{selectDefaultCard:function(){var e=this.bankingCards.find((function(e){return e.default}));e&&(this.bankingCard=e.id)},callUpdatePaidStatus:function(e,text){var t=e?"success":"error";e||(text=this.$t("try_again")),this.updatePaidStatus({type:t,text:text,title:this.$t("".concat(t,"_payment"))})},handlePayment:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],text=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"v1";if(this.isMobileBreakpoint){var c;this.$nuxt.$loading.start(),setTimeout((function(){return t.$nuxt.$loading.finish()}),500),window.location=(null==e||null===(c=e.data)||void 0===c?void 0:c.redirect_url)||e}else{var l,d,m={v1:"width=494,height=718",v2:"width=1042,height=725"}[o];window.open((null==e||null===(l=e.data)||void 0===l?void 0:l.redirect_url)||e,"purchaseservice","toolbar=yes,scrollbars=yes,resizable=yes,top=50,left=100,"+m);var f=null==e||null===(d=e.data)||void 0===d?void 0:d.payment_id;f&&this.connectEcho("purchase.".concat(f),!1).listen("PurchaseInitiated",function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(data){var n,o,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.showPaymentModal=!1,n=data.payment,o=n.is_paid,c=n.status,l=o||1===c,r=r instanceof Array?r[l?0:1]:r,!l){e.next=17;break}if("attorney_pay"!==data.payment.operation_key){e.next=7;break}return e.abrupt("return",t.$router.push({path:t.$localePath("/garage"),query:{tab:"attorney-list"}}));case 7:if(!t.loggedIn){e.next=10;break}return e.next=10,t.$auth.fetchUser();case 10:if(r){e.next=14;break}return e.next=13,t.$nuxt.refresh();case 13:t.callUpdatePaidStatus(l,text);case 14:localStorage.removeItem("selectedPackage"),e.next=18;break;case 17:t.callUpdatePaidStatus(l);case 18:d=function(){t.connectEcho("purchase.".concat(f),!1).stopListening("PurchaseInitiated")},r?l?t.$router.push(r,(function(){t.callUpdatePaidStatus(l,text),d()})):(t.$store.dispatch("fetchResetForm",!1),t.callUpdatePaidStatus(l,text),d()):d(),"offer_payment_key"==data.payment.operation_key&&l&&setTimeout((function(){t.$router.push("/offer")}),2e3);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}),watch:{bankingCards:function(e){this.selectDefaultCard()},haveBalanceToPay:function(e){e||(this.paymentMethod="card")}}}},996:function(e,t,r){"use strict";r(15),r(8),r(7),r(3),r(10),r(4),r(11);var n=r(1),o=r(0),c=(r(32),r(20),r(24),r(63),r(2),r(16));function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={props:{value:{},showCardImage:{type:Boolean,default:!0}},computed:d(d({},Object(c.c)({bankingCards:"bankingCards/bankingCards"})),{},{activeCardId:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},cardOptions:function(){var e=this;return this.bankingCards.map((function(t){return{key:t.id,name:e.$parseCardNum(t.masked_pan).join(" "),icon:"/img/cards/".concat(t.brand.toLowerCase()).concat(e.isDarkMode?"-white":"",".svg"),brand:t.brand}}))},activeCard:function(){var e=this;return this.bankingCards.find((function(t){return t.id===e.activeCardId}))}}),methods:d(d({},Object(c.b)({getBankingCards:"bankingCards/getBankingCards"})),{},{cardNumber:function(e){return this.$parseCardNum(e).map((function(e){return"<span>".concat(e,"</span>")})).join("")}}),fetch:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getBankingCards();case 2:case"end":return t.stop()}}),t)})))()}},f=r(12),component=Object(f.a)(m,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"select-banking-card"},[t("form-select",{attrs:{label:e.$t("pay_with_card"),options:e.cardOptions,"clear-option-text":e.$t("other_card"),"clear-option-pull-down":!0,"has-cards":!0,"skip-select":!0,"img-key":"icon"},model:{value:e.activeCardId,callback:function(t){e.activeCardId=t},expression:"activeCardId"}}),e._v(" "),e.activeCard&&e.showCardImage?t("div",{staticClass:"banking-cards_item mt-3"},[t("div",{staticClass:"card-img"},[t("img",{attrs:{src:"/img/cards/card-".concat(e.activeCard.brand.toLowerCase(),"-").concat(e.activeCard.img,".png"),alt:e.activeCard.brand}})]),e._v(" "),t("div",{staticClass:"card-details d-flex flex-column justify-content-between"},[t("div",{staticClass:"card-top d-flex"}),e._v(" "),t("div",{staticClass:"card-number d-flex justify-content-between",domProps:{innerHTML:e._s(e.cardNumber(e.activeCard.masked_pan))}}),e._v(" "),e._m(0)])]):e._e()],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"card-bottom d-flex"},[e("span",[this._v("**/**")])])}],!1,null,null,null);t.a=component.exports}}]);