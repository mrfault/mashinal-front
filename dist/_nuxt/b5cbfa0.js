(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{1010:function(e,t,n){var content=n(1026);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(39).default)("59c956cd",content,!0,{sourceMap:!1})},1025:function(e,t,n){"use strict";n(1010)},1026:function(e,t,n){var r=n(38)((function(i){return i[1]}));r.push([e.i,".comeBack[data-v-ef9a5fea]{align-items:center;background-color:#fff;border-radius:4px;display:flex;height:58px;margin:20px 0;padding:0 20px;width:100%}.comeBack i[data-v-ef9a5fea]:before{font-size:15px}.comeBack__text[data-v-ef9a5fea]{color:#081a3e;font-size:15px;font-weight:500;line-height:18px;margin:0 22px}.comeBack__line[data-v-ef9a5fea]{background-color:#081a3e;border-radius:100px;height:1px;width:100%}.dark-mode .comeBack[data-v-ef9a5fea]{background-color:#242426}.dark-mode .comeBack__text[data-v-ef9a5fea]{color:#fff}.dark-mode .comeBack__line[data-v-ef9a5fea]{background-color:#fff}",""]),r.locals={},e.exports=r},1028:function(e,t,n){"use strict";var r={props:{text:{type:String,default:"Text"}}},o=(n(1025),n(12)),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"comeBack",on:{click:function(t){return e.$router.go(-1)}}},[t("icon",{attrs:{name:"chevron-left"}}),e._v(" "),t("span",{staticClass:"comeBack__text"},[e._v(e._s(e.text))]),e._v(" "),t("span",{staticClass:"comeBack__line"})],1)}),[],!1,null,"ef9a5fea",null);t.a=component.exports},1260:function(e,t,n){var content=n(1416);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(39).default)("7229ec8f",content,!0,{sourceMap:!1})},1415:function(e,t,n){"use strict";n(1260)},1416:function(e,t,n){var r=n(38)((function(i){return i[1]}));r.push([e.i,".agreementPage[data-v-4a81db62]{padding-bottom:100px}.agreementPage h5[data-v-4a81db62],.agreementPage p[data-v-4a81db62],.agreementPage ul[data-v-4a81db62]{list-style:none;margin:0;padding:0}.agreementPage__title[data-v-4a81db62]{color:#081a3e;font-size:18px;font-weight:500;line-height:22px;margin:0 0 8px}.agreementPage__subtitle[data-v-4a81db62]{color:#246eb2;font-size:14px;font-weight:400;line-height:17px;margin:0}.agreementPage__table[data-v-4a81db62]{background-color:#fff;border-radius:4px;margin-top:20px;width:100%}.agreementPage__table-thead tr th[data-v-4a81db62]{color:#081a3e;font-size:16px;font-weight:500;line-height:19px}.agreementPage__table-tbody tr[data-v-4a81db62]{border-top:1px solid #d6e4f8;position:relative}.agreementPage__table-tbody tr.active td[data-v-4a81db62]{padding-bottom:230px}.agreementPage__table-tbody tr.active .agreementDetails[data-v-4a81db62]{display:block}.agreementPage__table-tbody tr.active .btns i[data-v-4a81db62]{transform:rotate(180deg)}.agreementPage__table-tbody tr td[data-v-4a81db62]{color:#081a3e;line-height:17px}.agreementPage__table-tbody tr td.status[data-v-4a81db62]{align-items:center;color:#29a53e;display:flex;justify-content:space-between}.agreementPage__table-tbody tr td.status .btns[data-v-4a81db62]{align-items:center;display:flex;gap:40px;margin-left:40px}.agreementPage__table-tbody tr td.status .btns svg[data-v-4a81db62]{cursor:pointer}.agreementPage__table-tbody tr td.status .btns .btn[data-v-4a81db62]{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background-color:#246eb2;color:#fff;padding:12px 36px}.agreementPage__table-tbody tr td.status .btns i[data-v-4a81db62]:before{color:#081a3e;font-size:13px;margin:0}.agreementPage__table-tbody tr td.status .detailsMobile[data-v-4a81db62]{display:none}.agreementPage__table-tbody tr td.status .detailsMobile .btn[data-v-4a81db62]{background-color:#246eb2;color:#fff;height:34px;padding:0 36px}.agreementPage__table-tbody tr td.not_paid span[data-v-4a81db62]{color:#081a3e;opacity:.3}.agreementPage__table-tbody tr td.is_expired span[data-v-4a81db62]{color:#f81734;opacity:1}.agreementPage__table-tbody tr td.agreementDetails[data-v-4a81db62]{bottom:0;display:none;left:0;padding:20px;position:absolute;width:100%}.agreementPage__table-tbody tr td.agreementDetails .agreementDetails__title[data-v-4a81db62]{color:#081a3e;font-size:16px;font-weight:500;line-height:19px;margin:0 0 20px}.agreementPage__table-tbody tr td.agreementDetails .agreementDetails__content[data-v-4a81db62]{display:flex;gap:20px}.agreementPage__table-tbody tr td.agreementDetails .agreementDetails__content .divider[data-v-4a81db62]{max-width:800px;width:100%}.agreementPage__table-tbody tr td.agreementDetails .agreementDetails__content .divider[data-v-4a81db62]:last-child{max-width:300px;width:100%}.agreementPage__table-tbody tr td.agreementDetails .agreementDetails__content-head[data-v-4a81db62]{align-items:center;background-color:#d6e4f8;border-radius:4px;display:flex;justify-content:space-between;padding:16px 20px}.agreementPage__table-tbody tr td.agreementDetails .agreementDetails__content-head_item span[data-v-4a81db62]{color:#081a3e;font-size:14px;line-height:17px}.agreementPage__table-tbody tr td.agreementDetails .agreementDetails__content-head_item span[data-v-4a81db62]:last-child{color:#246eb2;font-weight:600}.agreementPage__table-tbody tr td.agreementDetails .agreementDetails__content-price[data-v-4a81db62]{align-items:center;border:1px solid #d6e4f8;border-radius:4px;display:flex;flex-direction:column;padding:32px 0}.agreementPage__table-tbody tr td.agreementDetails .agreementDetails__content-price_item[data-v-4a81db62]{min-width:120px}.agreementPage__table-tbody tr td.agreementDetails .agreementDetails__content-price_item[data-v-4a81db62]:not(:first-child){margin-top:24px}.agreementPage__table-tbody tr td.agreementDetails .agreementDetails__content-price_item span[data-v-4a81db62]{color:#081a3e;display:inline-block;font-size:16px;line-height:19px}.agreementPage__table-tbody tr td.agreementDetails .agreementDetails__content-price_item span[data-v-4a81db62]:last-child{color:#f81734;font-weight:600;margin-left:8px}.agreementPage__table-tbody tr td.agreementDetailsMobile[data-v-4a81db62]{display:none;left:0;position:absolute;top:60px;width:100%}.agreementPage__table-tbody tr td.agreementDetailsMobile .agreementDetailsMobile__downloadIcon[data-v-4a81db62]{position:absolute;right:36px;top:32px}.agreementPage__table-tbody tr td.agreementDetailsMobile .agreementDetailsMobile__content[data-v-4a81db62]{background-color:#d6e4f8;border-radius:4px;padding:16px}.agreementPage__table-tbody tr td.agreementDetailsMobile .agreementDetailsMobile__content-list li[data-v-4a81db62]:not(:first-child){margin-top:20px}.agreementPage__table-tbody tr td.agreementDetailsMobile .agreementDetailsMobile__content-list li h5[data-v-4a81db62]{color:#081a3e;font-size:14px;font-weight:500;line-height:17px;margin-bottom:10px}.agreementPage__table-tbody tr td.agreementDetailsMobile .agreementDetailsMobile__content-list li span[data-v-4a81db62]{color:#081a3e;font-size:12px;font-weight:400;line-height:14px}.agreementPage__table-tbody tr td.agreementDetailsMobile .agreementDetailsMobile__content-info[data-v-4a81db62]{margin:16px 0}.agreementPage__table-tbody tr td.agreementDetailsMobile .agreementDetailsMobile__content-info li[data-v-4a81db62]{align-items:center;display:flex}.agreementPage__table-tbody tr td.agreementDetailsMobile .agreementDetailsMobile__content-info li[data-v-4a81db62]:not(:first-child){margin-top:16px}.agreementPage__table-tbody tr td.agreementDetailsMobile .agreementDetailsMobile__content-info li h5[data-v-4a81db62],.agreementPage__table-tbody tr td.agreementDetailsMobile .agreementDetailsMobile__content-info li span[data-v-4a81db62]{color:#081a3e;font-size:12px;font-weight:400;line-height:14px}.agreementPage__table-tbody tr td.agreementDetailsMobile .agreementDetailsMobile__content-info li span[data-v-4a81db62]{color:#246eb2;margin-left:5px}.agreementPage__table-tbody tr td.agreementDetailsMobile .agreementDetailsMobile__content-price[data-v-4a81db62]{align-items:center;display:flex;justify-content:space-around}.agreementPage__table-tbody tr td.agreementDetailsMobile .agreementDetailsMobile__content-price li span[data-v-4a81db62]{color:#081a3e;font-size:12px;line-height:14px}.agreementPage__table-tbody tr td.agreementDetailsMobile .agreementDetailsMobile__content-price li span[data-v-4a81db62]:last-child{color:#f81734;font-weight:600}.agreementPage__table-tbody tr td.agreementDetailsMobile .agreementDetailsMobile__content-info[data-v-4a81db62],.agreementPage__table-tbody tr td.agreementDetailsMobile .agreementDetailsMobile__content-price[data-v-4a81db62]{background-color:#fff;border-radius:4px;padding:16px}.agreementPage__table-tbody tr td.agreementDetailsMobile .agreementDetailsMobile__content .btn[data-v-4a81db62]{background-color:#246eb2;color:#fff;height:34px;margin-top:16px;padding:0 36px}.agreementPage__table-tbody tr.expired td[data-v-4a81db62]:last-child{color:#f81734;opacity:1}.agreementPage__table td[data-v-4a81db62],.agreementPage__table th[data-v-4a81db62]{padding:20px}.dark-mode .agreementPage__title[data-v-4a81db62]{color:#fff}.dark-mode .agreementPage__table[data-v-4a81db62]{background-color:#242426}.dark-mode .agreementPage__table-thead tr th[data-v-4a81db62]{color:#fff}.dark-mode .agreementPage__table-tbody tr[data-v-4a81db62]{border-color:#a4a4a5}.dark-mode .agreementPage__table-tbody tr td[data-v-4a81db62]:not(.status){color:#a4a4a5}.dark-mode .agreementPage__table-tbody tr td.status .btns i[data-v-4a81db62]:before{color:#fff}.dark-mode .agreementPage__table-tbody tr td.not_paid span[data-v-4a81db62]{color:#ffe400;opacity:1}.dark-mode .agreementPage__table-tbody tr td .agreementDetails__title[data-v-4a81db62]{color:#fff}.dark-mode .agreementPage__table-tbody tr td .agreementDetails__content-head[data-v-4a81db62]{background-color:#b9b9b9}.dark-mode .agreementPage__table-tbody tr td .agreementDetails__content-price[data-v-4a81db62]{border-color:#a4a4a5}.dark-mode .agreementPage__table-tbody tr td .agreementDetails__content-price_item span[data-v-4a81db62]{color:#a4a4a5}.dark-mode .agreementPage__table-tbody tr td .agreementDetailsMobile__content[data-v-4a81db62]{background-color:rgba(214,228,248,.149)}.dark-mode .agreementPage__table-tbody tr td .agreementDetailsMobile__content ul li h5[data-v-4a81db62]{color:#fff}.dark-mode .agreementPage__table-tbody tr td .agreementDetailsMobile__content ul li span[data-v-4a81db62]{color:#a4a4a5}.dark-mode .agreementPage__table-tbody tr td .agreementDetailsMobile__content-info[data-v-4a81db62],.dark-mode .agreementPage__table-tbody tr td .agreementDetailsMobile__content-price[data-v-4a81db62]{background-color:#454b50}@media (max-width:1250px){.agreementPage__table-thead tr th[data-v-4a81db62]{font-size:14px}.agreementPage__table-tbody tr td.agreementDetails .agreementDetails__content .divider[data-v-4a81db62]{max-width:850px}.agreementPage__table-tbody tr td.agreementDetails .agreementDetails__content .divider[data-v-4a81db62]:last-child{max-width:250px}.agreementPage__table-tbody tr td.agreementDetails .agreementDetails__content-head[data-v-4a81db62]{padding:16px 13px}.agreementPage__table-tbody tr td.agreementDetails .agreementDetails__content-head_item span[data-v-4a81db62]{font-size:13px}.agreementPage__table-tbody tr td.agreementDetails .agreementDetails__content-price[data-v-4a81db62]{padding:25px 0}.agreementPage__table-tbody tr td.agreementDetails .agreementDetails__content-price_item[data-v-4a81db62]:not(:first-child){margin-top:15px}}@media (max-width:1025px){.agreementPage__table-thead tr th[data-v-4a81db62]:first-child,.agreementPage__table-thead tr th[data-v-4a81db62]:nth-child(2),.agreementPage__table-thead tr th[data-v-4a81db62]:nth-child(3){display:none}.agreementPage__table-tbody tr.active td[data-v-4a81db62]{padding-bottom:490px}.agreementPage__table-tbody tr.active .agreementDetailsMobile[data-v-4a81db62]{display:block}.agreementPage__table-tbody tr td.status .btns[data-v-4a81db62],.agreementPage__table-tbody tr td[data-v-4a81db62]:first-child,.agreementPage__table-tbody tr td[data-v-4a81db62]:nth-child(2),.agreementPage__table-tbody tr td[data-v-4a81db62]:nth-child(3){display:none}.agreementPage__table-tbody tr td.status .detailsMobile[data-v-4a81db62]{display:block}.agreementPage__table-tbody tr td.agreementDetails[data-v-4a81db62]{display:none!important}}",""]),r.locals={},e.exports=r},1560:function(e,t,n){"use strict";n.r(t);n(17),n(8),n(7),n(3),n(10),n(4),n(11);var r=n(0),o=n(1),d=(n(32),n(15),n(2),n(42),n(41),n(586),n(221),n(63),n(16)),l=n(1028),c=n(990);function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v={components:{ComeBack:l.a},layout:"garageLayout",head:function(){return this.$headMeta({title:this.$t("agreements")})},mixins:[c.a],data:function(){return{activeAgreement:1,openModal:!1,pending:!1,duration:1,payment_type:"card",selectedPackage:{}}},methods:{handleSubmit:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var data,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pending=!0,"/payment/package",data={package_id:e.findUnpaid.package.id,payment_type:e.payment_type,name:e.user.autosalon.name,days_type:e.duration},t.prev=2,t.next=5,e.$axios.$post("".concat("/payment/package","?is_mobile=").concat(e.isMobileBreakpoint),data);case 5:if(null!=(r=t.sent)&&null!==(n=r.data)&&void 0!==n&&n.redirect_url){t.next=13;break}return t.next=9,e.$nuxt.refresh();case 9:return t.next=11,e.updatePaidStatus({type:"success",title:e.$t("success_payment")});case 11:t.next=16;break;case 13:return t.next=15,e.handlePayment(r,!1,e.$t("success_payment"));case 15:e.pending=e.openModal=!1;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(2),e.pending=!1;case 21:case"end":return t.stop()}}),t,null,[[2,18]])})))()},downloadInvoice:function(e){this.$axios.$get("/invoice/".concat(e,"/download"),{responseType:"blob"}).then((function(e){var t=new Blob([e],{type:"application/pdf"}),link=document.createElement("a");link.href=URL.createObjectURL(t),link.download="invoice.pdf",link.click(),URL.revokeObjectURL(link.href)}))}},computed:m(m({},Object(d.c)({getAgreements:"getAgreements"})),{},{crumbs:function(){return[{name:this.$t("dashboard"),route:"".concat(this.user.autosalon?"/dashboard/1":"/garage-services")},{name:this.$t("agreements")}]},totalBalance:function(){var e,t,n;return this.$sum(this.user.balance,(null===(e=this.user.autosalon)||void 0===e?void 0:e.balance)||0,(null===(t=this.user.part_salon)||void 0===t?void 0:t.balance)||0,(null===(n=this.user.external_salon)||void 0===n?void 0:n.balance)||0)},findUnpaid:function(){return this.getAgreements.find((function(e){return!1===e.payment.is_paid}))}}),mounted:function(){this.selectedPackage=JSON.parse(localStorage.getItem("selectedPackage"))},asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.store,t.next=3,n.dispatch("fetchAgreements");case 3:case"end":return t.stop()}}),t)})))()}},f=(n(1415),n(12)),component=Object(f.a)(v,(function(){var e,t,n,r=this,o=r._self._c;return o("div",{staticClass:"agreementPage"},[o("div",{},[r.isMobileBreakpoint?o("ComeBack",{attrs:{text:r.$t("agreements")}}):r._e(),r._v(" "),o("portal",{attrs:{to:"breadcrumbs"}},[o("breadcrumbs",{attrs:{crumbs:r.crumbs}})],1),r._v(" "),o(r.isMobileBreakpoint?"mobile-screen":"div",{tag:"component",attrs:{"bar-title":r.$t("agreements"),"height-auto":""},on:{back:function(e){r.$router.push(r.pageRef||r.$localePath("/profile/agreement"))}}},[o("h4",{staticClass:"agreementPage__title"},[r._v(r._s(r.$t("agreements")))]),r._v(" "),o("table",{staticClass:"agreementPage__table"},[o("thead",{staticClass:"agreementPage__table-thead"},[o("tr",[o("th",[r._v(r._s(r.$t("invoice_date")))]),r._v(" "),o("th",[r._v(r._s(r.$t("invoice_number")))]),r._v(" "),o("th",[r._v(r._s(r.$t("type_of_service")))]),r._v(" "),o("th",[r._v(r._s(r.$t("payment_amount")))]),r._v(" "),o("th",[r._v(r._s(r.$t("status_and_date")))])])]),r._v(" "),o("tbody",{staticClass:"agreementPage__table-tbody"},r._l(r.getAgreements,(function(e){return o("tr",{key:e.id,class:["",{active:r.activeAgreement===e.package.id}],on:{click:function(t){r.activeAgreement=e.package.id}}},[o("td",[r._v(r._s(r.$moment(e.start_date).format("DD.MM.YYYY")))]),r._v(" "),o("td",[r._v(r._s(e.id))]),r._v(" "),o("td",[r._v(r._s(e.package.name[r.locale])+" "+r._s(r.$t("package3")))]),r._v(" "),o("td",[r._v(r._s(e.price)+" AZN")]),r._v(" "),o("td",{class:["status",{not_paid:!e.payment.is_paid&&!e.is_expired,is_expired:e.is_expired}]},[!1===e.is_expired?o("span",[r._v(r._s(e.payment.is_paid?r.$t("already_paid"):r.$t("not_paid")))]):o("span",[r._v(r._s(r.$t("overdue"))+" | "+r._s(r.$moment(e.end_date).format("DD.MM.YYYY")))]),r._v(" "),o("div",{staticClass:"btns"},[o("inline-svg",{attrs:{src:"/icons/download.svg"},on:{click:function(t){return r.downloadInvoice(e.id)}}}),r._v(" "),!e.payment.is_paid||e.is_expired?o("button",{staticClass:"btn",on:{click:function(e){r.openModal=!0}}},[r._v(r._s(r.$t("pay")))]):r._e(),r._v(" "),o("icon",{attrs:{name:"chevron-down"}})],1),r._v(" "),o("div",{staticClass:"detailsMobile"},[o("button",{staticClass:"btn"},[r._v("\n                           "+r._s(r.$t("details"))+"\n")])])]),r._v(" "),o("td",{staticClass:"agreementDetails"},[o("h5",{staticClass:"agreementDetails__title"},[r._v(r._s(e.package.name[r.locale])+" "+r._s(r.$t("package2")))]),r._v(" "),o("div",{staticClass:"agreementDetails__content"},[o("div",{staticClass:"divider"},[o("div",{staticClass:"agreementDetails__content-head"},[o("div",{staticClass:"agreementDetails__content-head_item"},[o("span",[r._v(r._s(r.$t("paid_ads"))+":")]),r._v(" "),o("span",[r._v(r._s(e.package.announce_count))])]),r._v(" "),o("div",{staticClass:"agreementDetails__content-head_item"},[o("span",[r._v(r._s(r.$t("paid_services"))+":")]),r._v(" "),o("span",[r._v(r._s(e.package.service_price)+" AZN")])]),r._v(" "),o("div",{staticClass:"agreementDetails__content-head_item"},[o("span",[r._v(r._s(r.$t("package_duration"))+":")]),r._v(" "),o("span",[r._v(r._s(r.$moment(e.start_date).format("DD.MM.YYYY"))+" - "+r._s(r.$moment(e.end_date).format("DD.MM.YYYY")))])])])]),r._v(" "),o("div",{staticClass:"divider"},[o("div",{staticClass:"agreementDetails__content-price"},[o("div",{staticClass:"agreementDetails__content-price_item"},[o("span",[r._v(r._s(r.$t("vat"))+":")]),r._v(" "),o("span",[r._v(r._s(e.price)+" AZN")])]),r._v(" "),o("div",{staticClass:"agreementDetails__content-price_item"},[o("span",[r._v(r._s(r.$t("total"))+":")]),r._v(" "),o("span",[r._v(r._s(e.price)+" AZN")])])])])])]),r._v(" "),o("td",{staticClass:"agreementDetailsMobile"},[o("inline-svg",{staticClass:"agreementDetailsMobile__downloadIcon",attrs:{src:"/icons/download.svg"},on:{click:function(t){return r.downloadInvoice(e.id)}}}),r._v(" "),o("div",{staticClass:"agreementDetailsMobile__content"},[o("ul",{staticClass:"agreementDetailsMobile__content-list"},[o("li",[o("h5",[r._v(r._s(r.$t("invoice_date")))]),r._v(" "),o("span",[r._v(r._s(r.$moment(e.start_date).format("DD.MM.YYYY")))])]),r._v(" "),o("li",[o("h5",[r._v(r._s(r.$t("invoice_number")))]),r._v(" "),o("span",[r._v(r._s(e.id))])]),r._v(" "),o("li",[o("h5",[r._v(r._s(r.$t("type_of_service")))]),r._v(" "),o("span",[r._v(r._s(e.package.name[r.locale])+" "+r._s(r.$t("package3")))])])]),r._v(" "),o("ul",{staticClass:"agreementDetailsMobile__content-info"},[o("li",[o("h5",[r._v(r._s(r.$t("paid_ads"))+":")]),r._v(" "),o("span",[r._v(r._s(e.package.announce_count))])]),r._v(" "),o("li",[o("h5",[r._v(r._s(r.$t("paid_services"))+":")]),r._v(" "),o("span",[r._v(r._s(e.package.service_price)+" AZN")])]),r._v(" "),o("li",[o("h5",[r._v(r._s(r.$t("package_duration"))+":")]),r._v(" "),o("span",[r._v(r._s(r.$moment(e.start_date).format("DD.MM.YYYY"))+" - "+r._s(r.$moment(e.end_date).format("DD.MM.YYYY")))])])]),r._v(" "),o("ul",{staticClass:"agreementDetailsMobile__content-price"},[o("li",[o("span",[r._v(r._s(r.$t("vat"))+":")]),r._v(" "),o("span",[r._v(r._s(e.price)+" AZN")])]),r._v(" "),o("li",[o("span",[r._v(r._s(r.$t("total"))+":")]),r._v(" "),o("span",[r._v(r._s(e.price)+" AZN")])])]),r._v(" "),e.payment.is_paid?r._e():o("button",{staticClass:"btn full-width",on:{click:function(e){r.openModal=!0}}},[r._v(r._s(r.$t("pay")))])])],1)])})),0)])]),r._v(" "),o("modal-popup",{attrs:{toggle:r.openModal,title:r.$t("ads_balans"),"modal-class":"larger packages"},on:{close:function(e){r.openModal=!1}}},[o("h4",{staticClass:"paymentMethods mb-3"},[r._v(r._s(r.$t("payment_method")))]),r._v(" "),o("label",{staticClass:"radio-container"},[r._v("\n            "+r._s(r.$t("pay_with_card"))+"\n            "),o("input",{attrs:{type:"radio",name:"payment_type",checked:""},on:{change:function(e){r.payment_type="card"}}}),r._v(" "),o("span",{staticClass:"checkmark"})]),r._v(" "),this.$auth.loggedIn&&r.totalBalance>0?o("label",{staticClass:"radio-container"},[r._v("\n            "+r._s(r.$t("balans"))+"\n            "),o("input",{attrs:{type:"radio",name:"payment_type"},on:{change:function(e){r.payment_type="balance"}}}),r._v(" "),o("span",{staticClass:"checkmark"})]):r._e(),r._v(" "),r.totalBalance>0?o("hr"):r._e(),r._v(" "),r.totalBalance>0?o("div",{staticClass:"terminal-section"},[r._v("\n            "+r._s(r.$t("balans"))+": "),o("span",{staticStyle:{"margin-right":"20px"}},[r._v(r._s(r.totalBalance))]),r._v("\n            "+r._s(r.$t("package_price"))+": "+r._s((null===(e=r.selectedPackage)||void 0===e?void 0:e.price)*r.duration)+" AZN\n         ")]):r._e(),r._v(" "),r.totalBalance<1?o("hr"):r._e(),r._v(" "),r.totalBalance<1?o("div",{staticClass:"terminal-section"},[r._v("\n            "+r._s(r.$t("package_price"))+" "+r._s((null===(t=r.getAgreements[0])||void 0===t?void 0:t.price)||(null===(n=r.selectedPackage)||void 0===n?void 0:n.price)*r.duration)+" AZN\n         ")]):r._e(),r._v(" "),o("div",{staticClass:"modal-sticky-bottom"},[o("hr"),r._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-lg-12 mt-2 mt-lg-0"},[o("button",{class:["btn btn--green full-width",{pending:r.pending}],on:{click:r.handleSubmit}},[r._v("\n                     "+r._s(r.$t("pay"))+"\n                  ")])])])])])],1)])}),[],!1,null,"4a81db62",null);t.default=component.exports},990:function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));n(8),n(7),n(3),n(10),n(4),n(11);var r=n(1),o=n(0),d=(n(32),n(63),n(2),n(35),n(16)),l=n(274),c=n(996),_={props:{popupName:{type:String,default:"payment-popup"}},methods:{show:function(){this.$nuxt.$emit("show-terminal-info",this.popupName)}}},m=n(12),v=Object(m.a)(_,(function(){var e=this,t=e._self._c;return t("p",{staticClass:"info-text text-left"},[t("inline-svg",{attrs:{src:"/icons/alert-circle.svg"}}),e._v(" "),t("span",{staticClass:"text-medium cursor-pointer text-red",on:{click:e.show}},[e._v(e._s(e.$t("pay_with_terminal")))])],1)}),[],!1,null,null,null).exports;n(17);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var h={props:{name:{type:String,default:"payment-popup"}},data:function(){return{showTerminalInfo:!1}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(d.c)(["announcement"])),methods:{open:function(e){e===this.name&&(this.showTerminalInfo=!0,this.$emit("open"))},close:function(){this.showTerminalInfo=!1,this.$emit("close")}},mounted:function(){this.$nuxt.$on("show-terminal-info",this.open)},beforeDestroy:function(){this.$nuxt.$off("show-terminal-info",this.open)}},y=h,x=Object(m.a)(y,(function(){var e=this,t=e._self._c;return t("modal-popup",{attrs:{toggle:e.showTerminalInfo,title:e.$t("pay_with_terminal"),"modal-class":"terminal-info-popup"},on:{close:e.close}},[t("div",{staticClass:"phone-section"},[e.announcement.user?t("div",{staticClass:"phone"},[e._v("\n      "+e._s(e.$parsePhone(e.announcement.user.phone))+"\n    ")]):e._e(),e._v(" "),t("span",[e._v("\n      "+e._s(e.$t("mobile_number"))+"\n    ")])]),e._v(" "),t("hr"),e._v(" "),t("div",{staticClass:"description"},[t("img",{attrs:{src:"/images/milli-on.svg",alt:""}}),e._v(" "),t("span",[e._v(e._s(e.$t("terminal_popup_title")))])]),e._v(" "),t("div",{staticClass:"steps"},e._l(e.$t("terminal_pay_steps"),(function(n,i){return t("div",{key:i,staticClass:"step-item"},[t("div",{staticClass:"step-number"},[t("span",[e._v(e._s(i))])]),e._v(" "),t("div",{staticClass:"step-text"},[e._v(e._s(n))])])})),0),e._v(" "),t("hr"),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-7"},[t("p",[e._v("\n       "+e._s(e.$t("terminal_help_description"))+"\n      ")])]),e._v(" "),t("div",{staticClass:"col-md-5"},[t("button",{staticClass:"btn btn--primary-outline full-width",attrs:{type:"button"},on:{click:e.close}},[e._v("\n        "+e._s(e.$t("go_back"))+"\n      ")])])])])}),[],!1,null,null,null).exports;function k(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function P(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var D={mixins:[l.a],components:{SelectBankingCard:c.a,TerminalInfoButton:v,TerminalInfoPopup:x},data:function(){return{showPaymentModal:!1,paymentMethod:"card",bankingCard:""}},mounted:function(){this.selectDefaultCard()},computed:P(P(P({},Object(d.c)({bankingCards:"bankingCards/bankingCards"})),Object(d.c)(["paidStatusData"])),{},{paymentMethodOptions:function(){return[{key:"card",name:this.$t("pay_with_card")},{key:"balance",name:this.$t("pay_with_balance"),disabled:!this.haveBalanceToPay}]}}),methods:P(P({},Object(d.b)(["updatePaidStatus"])),{},{selectDefaultCard:function(){var e=this.bankingCards.find((function(e){return e.default}));e&&(this.bankingCard=e.id)},callUpdatePaidStatus:function(e,text){var t=e?"success":"error";e||(text=this.$t("try_again")),this.updatePaidStatus({type:t,text:text,title:this.$t("".concat(t,"_payment"))})},handlePayment:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],text=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"v1";if(this.isMobileBreakpoint){var d;this.$nuxt.$loading.start(),setTimeout((function(){return t.$nuxt.$loading.finish()}),500),window.location=(null==e||null===(d=e.data)||void 0===d?void 0:d.redirect_url)||e}else{var l,c,_={v1:"width=494,height=718",v2:"width=1042,height=725"}[o];window.open((null==e||null===(l=e.data)||void 0===l?void 0:l.redirect_url)||e,"purchaseservice","toolbar=yes,scrollbars=yes,resizable=yes,top=50,left=100,"+_);var m=null==e||null===(c=e.data)||void 0===c?void 0:c.payment_id;m&&this.connectEcho("purchase.".concat(m),!1).listen("PurchaseInitiated",function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(data){var r,o,d,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.showPaymentModal=!1,r=data.payment,o=r.is_paid,d=r.status,l=o||1===d,n=n instanceof Array?n[l?0:1]:n,!l){e.next=17;break}if("attorney_pay"!==data.payment.operation_key){e.next=7;break}return e.abrupt("return",t.$router.push({path:t.$localePath("/garage"),query:{tab:"attorney-list"}}));case 7:if(!t.loggedIn){e.next=10;break}return e.next=10,t.$auth.fetchUser();case 10:if(n){e.next=14;break}return e.next=13,t.$nuxt.refresh();case 13:t.callUpdatePaidStatus(l,text);case 14:localStorage.removeItem("selectedPackage"),e.next=18;break;case 17:t.callUpdatePaidStatus(l);case 18:c=function(){t.connectEcho("purchase.".concat(m),!1).stopListening("PurchaseInitiated")},n?l?t.$router.push(n,(function(){t.callUpdatePaidStatus(l,text),c()})):(t.$store.dispatch("fetchResetForm",!1),t.callUpdatePaidStatus(l,text),c()):c(),"offer_payment_key"==data.payment.operation_key&&l&&setTimeout((function(){t.$router.push("/offer")}),2e3);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}),watch:{bankingCards:function(e){this.selectDefaultCard()},haveBalanceToPay:function(e){e||(this.paymentMethod="card")}}}},996:function(e,t,n){"use strict";n(15),n(8),n(7),n(3),n(10),n(4),n(11);var r=n(1),o=n(0),d=(n(32),n(20),n(24),n(63),n(2),n(16));function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _={props:{value:{},showCardImage:{type:Boolean,default:!0}},computed:c(c({},Object(d.c)({bankingCards:"bankingCards/bankingCards"})),{},{activeCardId:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},cardOptions:function(){var e=this;return this.bankingCards.map((function(t){return{key:t.id,name:e.$parseCardNum(t.masked_pan).join(" "),icon:"/img/cards/".concat(t.brand.toLowerCase()).concat(e.isDarkMode?"-white":"",".svg"),brand:t.brand}}))},activeCard:function(){var e=this;return this.bankingCards.find((function(t){return t.id===e.activeCardId}))}}),methods:c(c({},Object(d.b)({getBankingCards:"bankingCards/getBankingCards"})),{},{cardNumber:function(e){return this.$parseCardNum(e).map((function(e){return"<span>".concat(e,"</span>")})).join("")}}),fetch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getBankingCards();case 2:case"end":return t.stop()}}),t)})))()}},m=n(12),component=Object(m.a)(_,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"select-banking-card"},[t("form-select",{attrs:{label:e.$t("pay_with_card"),options:e.cardOptions,"clear-option-text":e.$t("other_card"),"clear-option-pull-down":!0,"has-cards":!0,"skip-select":!0,"img-key":"icon"},model:{value:e.activeCardId,callback:function(t){e.activeCardId=t},expression:"activeCardId"}}),e._v(" "),e.activeCard&&e.showCardImage?t("div",{staticClass:"banking-cards_item mt-3"},[t("div",{staticClass:"card-img"},[t("img",{attrs:{src:"/img/cards/card-".concat(e.activeCard.brand.toLowerCase(),"-").concat(e.activeCard.img,".png"),alt:e.activeCard.brand}})]),e._v(" "),t("div",{staticClass:"card-details d-flex flex-column justify-content-between"},[t("div",{staticClass:"card-top d-flex"}),e._v(" "),t("div",{staticClass:"card-number d-flex justify-content-between",domProps:{innerHTML:e._s(e.cardNumber(e.activeCard.masked_pan))}}),e._v(" "),e._m(0)])]):e._e()],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"card-bottom d-flex"},[e("span",[this._v("**/**")])])}],!1,null,null,null);t.a=component.exports}}]);