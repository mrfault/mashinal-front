(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{1584:function(e,t,r){"use strict";r.r(t);r(7),r(10),r(4),r(11);var n=r(25),c=r(0),o=r(1),m=(r(32),r(63),r(2),r(3),r(42),r(41),r(15),r(20),r(8),r(16)),l=r(1288),d=r(994),h=r(995);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v={name:"pages-commercial-slug",layout:"search",components:{CommercialSearchForm:l.a,Grid:d.a,NoResults:h.a},nuxtI18n:{paths:{az:"/ticari-avtomobiller/:commercial"}},head:function(){return this.$headMeta({title:this.$t("meta-title_commercial",{type:this.$t("meta-words_commercial-types")[0]}),description:this.$t("meta-descr_commercial",{type:this.$t("meta-words_commercial-types")[0]})})},asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,c,o,m,l,d,h,f,v,O;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=e.store,o=e.route,m=e.app,l=e.error,d={trucks:"trucks",buses:"buses",trailers:"trailers",special:"special",yuk:"trucks",avtobuslar:"buses",qosqulu:"trailers",xususi:"special"}[o.params.commercial],(h={id:null===(r=c.getters.commercialTypes.find((function(e){return e.param===d})))||void 0===r?void 0:r.id,type:d}).type){t.next=5;break}return t.abrupt("return",l({statusCode:404}));case 5:return t.next=7,c.dispatch("i18n/setRouteParams",{az:{commercial:m.i18n.t("slug_"+d,"az")},ru:{commercial:m.i18n.t("slug_"+d,"ru")}});case 7:return f=y(y({},JSON.parse(o.query.filter||"{}")),{},{com_type:h.id}),v=o.query.page||1,O={url:"/grid/commercial",prefix:"commercial"},t.next=12,Promise.all([c.dispatch("getOptions"),c.dispatch("getColors"),c.dispatch("getCommercialSearchFilters",h.id),c.dispatch("getCommercialBrands",{category:h.id}),c.dispatch("getGridSearch",y(y({},O),{},{post:f,page:v}))].concat(Object(n.a)(Object.keys((null==f?void 0:f.additional_brands)||{}).filter((function(e){var t,r;return null==f||null===(t=f.additional_brands)||void 0===t||null===(r=t[e])||void 0===r?void 0:r.brand})).map((function(e){var t=f.additional_brands[e];return c.dispatch("getCommercialModels",{category:h.id,id:t.brand,index:e})})))));case 12:return t.abrupt("return",{category:h,searchParams:O,pending:!1});case 13:case"end":return t.stop()}}),t)})))()},methods:y(y({},Object(m.b)(["getGridSearch"])),{},{searchCommercial:function(){var e=arguments,t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:1,n=t.$route.query.page||1,c=y(y({},JSON.parse(t.$route.query.filter||"{}")),{},{com_type:t.category.id}),t.pending=!0,r.next=6,t.getGridSearch(y(y({},t.searchParams),{},{post:c,page:n}));case 6:return r.next=8,t.$store.dispatch("fetchInfiniteMainMonetized",{type:"commercial",data:c});case 8:t.pending=!1,1===n?t.scrollTo(".announcements-sorting"):t.scrollTo(".announcements-grid.paginated",[-15,-20]);case 10:case"end":return r.stop()}}),r)})))()}}),computed:y(y({},Object(m.c)(["commercialAnnouncements","getMainMonetized"])),{},{crumbs:function(){return[{name:this.$t("commercial"),route:"/commercial"},{name:this.$t("commercial_"+this.category.type)}]}}),mounted:function(){this.$store.dispatch("fetchInfiniteMainMonetized",{type:"commercial"})},beforeRouteLeave:function(e,t,r){this.$nuxt.$emit("prevent-popstate"),r()}},O=v,j=r(12),component=Object(j.a)(O,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"pages-commercial"},[t("div",{staticClass:"container"},[t("breadcrumbs",{attrs:{crumbs:e.crumbs}}),e._v(" "),t("commercial-search-form",{attrs:{"total-count":e.$paginate(e.commercialAnnouncements).total,pending:e.pending,category:e.category},on:{pending:function(t){e.pending=!0},submit:e.searchCommercial}}),e._v(" "),e.getMainMonetized.length?t("grid",{attrs:{announcements:e.getMainMonetized,"show-title":!0,"escape-duplicates":""}}):e._e(),e._v(" "),e.commercialAnnouncements.data.length?t("grid",{attrs:{announcements:e.commercialAnnouncements.data,paginate:e.$paginate(e.commercialAnnouncements),pending:e.pending,"escape-duplicates":""},on:{"change-page":e.searchCommercial}}):t("no-results")],1)])}),[],!1,null,null,null);t.default=component.exports}}]);